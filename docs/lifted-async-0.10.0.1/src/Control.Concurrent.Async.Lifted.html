<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><a name="line-2"></a><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><a name="line-3"></a><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><a name="line-4"></a><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><a name="line-5"></a><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><a name="line-6"></a><span>
</span><a name="line-7"></a><span class="hs-comment">{- |
Module      : Control.Concurrent.Async.Lifted
Copyright   : Copyright (C) 2012-2018 Mitsutoshi Aoe
License     : BSD-style (see the file LICENSE)
Maintainer  : Mitsutoshi Aoe &lt;maoe@foldr.in&gt;
Stability   : experimental

This is a wrapped version of @Control.Concurrent.Async@ with types generalized
from 'IO' to all monads in either 'MonadBase' or 'MonadBaseControl'.

All the functions restore the monadic effects in the forked computation
unless specified otherwise.

If your monad stack satisfies @'StM' m a ~ a@ (e.g. the reader monad), consider
using @Control.Concurrent.Async.Lifted.Safe@ module, which prevents you from
messing up monadic effects.
-}</span><span>
</span><a name="line-24"></a><span>
</span><a name="line-25"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Control.Concurrent.Async.Lifted</span><span>
</span><a name="line-26"></a><span>  </span><span class="hs-special">(</span><span> </span><span class="hs-comment">-- * Asynchronous actions</span><span>
</span><a name="line-27"></a><span>    </span><span class="hs-identifier hs-type">A.Async</span><span>
</span><a name="line-28"></a><span>    </span><span class="hs-comment">-- ** Spawning</span><span>
</span><a name="line-29"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#async"><span class="hs-identifier hs-var">async</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#asyncBound"><span class="hs-identifier hs-var">asyncBound</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#asyncOn"><span class="hs-identifier hs-var">asyncOn</span></a><span>
</span><a name="line-30"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#asyncWithUnmask"><span class="hs-identifier hs-var">asyncWithUnmask</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#asyncOnWithUnmask"><span class="hs-identifier hs-var">asyncOnWithUnmask</span></a><span>
</span><a name="line-31"></a><span>
</span><a name="line-32"></a><span>    </span><span class="hs-comment">-- ** Spawning with automatic 'cancel'ation</span><span>
</span><a name="line-33"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#withAsync"><span class="hs-identifier hs-var">withAsync</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#withAsyncBound"><span class="hs-identifier hs-var">withAsyncBound</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#withAsyncOn"><span class="hs-identifier hs-var">withAsyncOn</span></a><span>
</span><a name="line-34"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#withAsyncWithUnmask"><span class="hs-identifier hs-var">withAsyncWithUnmask</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#withAsyncOnWithUnmask"><span class="hs-identifier hs-var">withAsyncOnWithUnmask</span></a><span>
</span><a name="line-35"></a><span>
</span><a name="line-36"></a><span>    </span><span class="hs-comment">-- ** Quering 'Async's</span><span>
</span><a name="line-37"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#wait"><span class="hs-identifier hs-var">wait</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#poll"><span class="hs-identifier hs-var">poll</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#waitCatch"><span class="hs-identifier hs-var">waitCatch</span></a><span>
</span><a name="line-38"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#cancel"><span class="hs-identifier hs-var">cancel</span></a><span>
</span><a name="line-39"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#uninterruptibleCancel"><span class="hs-identifier hs-var">uninterruptibleCancel</span></a><span>
</span><a name="line-40"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#cancelWith"><span class="hs-identifier hs-var">cancelWith</span></a><span>
</span><a name="line-41"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">A.asyncThreadId</span><span>
</span><a name="line-42"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">A.AsyncCancelled</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-43"></a><span>
</span><a name="line-44"></a><span>    </span><span class="hs-comment">-- ** STM operations</span><span>
</span><a name="line-45"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">A.waitSTM</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">A.pollSTM</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">A.waitCatchSTM</span><span>
</span><a name="line-46"></a><span>
</span><a name="line-47"></a><span>    </span><span class="hs-comment">-- ** Waiting for multiple 'Async's</span><span>
</span><a name="line-48"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#waitAny"><span class="hs-identifier hs-var">waitAny</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#waitAnyCatch"><span class="hs-identifier hs-var">waitAnyCatch</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#waitAnyCancel"><span class="hs-identifier hs-var">waitAnyCancel</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#waitAnyCatchCancel"><span class="hs-identifier hs-var">waitAnyCatchCancel</span></a><span>
</span><a name="line-49"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#waitEither"><span class="hs-identifier hs-var">waitEither</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#waitEitherCatch"><span class="hs-identifier hs-var">waitEitherCatch</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#waitEitherCancel"><span class="hs-identifier hs-var">waitEitherCancel</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#waitEitherCatchCancel"><span class="hs-identifier hs-var">waitEitherCatchCancel</span></a><span>
</span><a name="line-50"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#waitEither_"><span class="hs-identifier hs-var">waitEither_</span></a><span>
</span><a name="line-51"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#waitBoth"><span class="hs-identifier hs-var">waitBoth</span></a><span>
</span><a name="line-52"></a><span>
</span><a name="line-53"></a><span>    </span><span class="hs-comment">-- ** Waiting for multiple 'Async's in STM</span><span>
</span><a name="line-54"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">A.waitAnySTM</span><span>
</span><a name="line-55"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">A.waitAnyCatchSTM</span><span>
</span><a name="line-56"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">A.waitEitherSTM</span><span>
</span><a name="line-57"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">A.waitEitherCatchSTM</span><span>
</span><a name="line-58"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">A.waitEitherSTM_</span><span>
</span><a name="line-59"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">A.waitBothSTM</span><span>
</span><a name="line-60"></a><span>
</span><a name="line-61"></a><span>    </span><span class="hs-comment">-- ** Linking</span><span>
</span><a name="line-62"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#link"><span class="hs-identifier hs-var">link</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#link2"><span class="hs-identifier hs-var">link2</span></a><span>
</span><a name="line-63"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">A.ExceptionInLinkedThread</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-64"></a><span>
</span><a name="line-65"></a><span>    </span><span class="hs-comment">-- * Convenient utilities</span><span>
</span><a name="line-66"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#race"><span class="hs-identifier hs-var">race</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#race_"><span class="hs-identifier hs-var">race_</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#concurrently"><span class="hs-identifier hs-var">concurrently</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#concurrently_"><span class="hs-identifier hs-var">concurrently_</span></a><span>
</span><a name="line-67"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#mapConcurrently"><span class="hs-identifier hs-var">mapConcurrently</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#mapConcurrently_"><span class="hs-identifier hs-var">mapConcurrently_</span></a><span>
</span><a name="line-68"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#forConcurrently"><span class="hs-identifier hs-var">forConcurrently</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#forConcurrently_"><span class="hs-identifier hs-var">forConcurrently_</span></a><span>
</span><a name="line-69"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#replicateConcurrently"><span class="hs-identifier hs-var">replicateConcurrently</span></a><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#replicateConcurrently_"><span class="hs-identifier hs-var">replicateConcurrently_</span></a><span>
</span><a name="line-70"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-type">Concurrently</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-71"></a><span>
</span><a name="line-72"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">A.compareAsyncs</span><span>
</span><a name="line-73"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-74"></a><span>
</span><a name="line-75"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Applicative</span><span>
</span><a name="line-76"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Concurrent</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">threadDelay</span><span class="hs-special">)</span><span>
</span><a name="line-77"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">&gt;=&gt;</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">forever</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">void</span><span class="hs-special">)</span><span>
</span><a name="line-78"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Foldable</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fold</span><span class="hs-special">)</span><span>
</span><a name="line-79"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">GHC.IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">unsafeUnmask</span><span class="hs-special">)</span><span>
</span><a name="line-80"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Prelude</span><span>
</span><a name="line-81"></a><span>
</span><a name="line-82"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Concurrent.Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span class="hs-special">)</span><span>
</span><a name="line-83"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Exception.Lifted</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">SomeException</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Exception</span><span class="hs-special">)</span><span>
</span><a name="line-84"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad.Base</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">MonadBase</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-85"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad.Trans.Control</span><span>
</span><a name="line-86"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Control.Concurrent.Async</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">A</span><span>
</span><a name="line-87"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Control.Exception.Lifted</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">E</span><span>
</span><a name="line-88"></a><span>
</span><a name="line-89"></a><span class="hs-cpp">#if defined(__GLASGOW_HASKELL__) &amp;&amp; __GLASGOW_HASKELL__ &lt; 710
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Foldable</span><span>
</span><a name="line-91"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Traversable</span><span>
</span><a name="line-92"></a><span class="hs-cpp">#endif
#if !MIN_VERSION_base(4, 8, 0)
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Monoid</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Monoid</span><span class="hs-special">(</span><span class="hs-identifier">mappend</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">mempty</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-95"></a><span class="hs-cpp">#elif MIN_VERSION_base(4, 9, 0)
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Semigroup</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Semigroup</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;&gt;</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-97"></a><span class="hs-cpp">#endif
</span><span>
</span><a name="line-99"></a><span class="hs-comment">-- | Generalized version of 'A.async'.</span><span>
</span><a name="line-100"></a><span class="hs-identifier">async</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039867"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679039867"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039868"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039867"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039867"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039868"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-101"></a><a name="async"><a href="Control.Concurrent.Async.Lifted.html#async"><span class="hs-identifier">async</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#asyncUsing"><span class="hs-identifier hs-var">asyncUsing</span></a><span> </span><span class="hs-identifier hs-var">A.async</span><span>
</span><a name="line-102"></a><span>
</span><a name="line-103"></a><span class="hs-comment">-- | Generalized version of 'A.asyncBound'.</span><span>
</span><a name="line-104"></a><span class="hs-identifier">asyncBound</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039865"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679039865"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039866"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039865"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039865"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039866"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-105"></a><a name="asyncBound"><a href="Control.Concurrent.Async.Lifted.html#asyncBound"><span class="hs-identifier">asyncBound</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#asyncUsing"><span class="hs-identifier hs-var">asyncUsing</span></a><span> </span><span class="hs-identifier hs-var">A.asyncBound</span><span>
</span><a name="line-106"></a><span>
</span><a name="line-107"></a><span class="hs-comment">-- | Generalized version of 'A.asyncOn'.</span><span>
</span><a name="line-108"></a><span class="hs-identifier">asyncOn</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039863"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039863"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039864"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039863"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039863"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039864"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-109"></a><a name="asyncOn"><a href="Control.Concurrent.Async.Lifted.html#asyncOn"><span class="hs-identifier">asyncOn</span></a></a><span> </span><a name="local-6989586621679039869"><a href="#local-6989586621679039869"><span class="hs-identifier">cpu</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#asyncUsing"><span class="hs-identifier hs-var">asyncUsing</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">A.asyncOn</span><span> </span><a href="#local-6989586621679039869"><span class="hs-identifier hs-var">cpu</span></a><span class="hs-special">)</span><span>
</span><a name="line-110"></a><span>
</span><a name="line-111"></a><span class="hs-comment">-- | Generalized version of 'A.asyncWithUnmask'.</span><span>
</span><a name="line-112"></a><span class="hs-identifier">asyncWithUnmask</span><span>
</span><a name="line-113"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039860"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-114"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679039862"><a href="#local-6989586621679039862"><span class="hs-identifier">b</span></a></a><span class="hs-operator">.</span><span> </span><a href="#local-6989586621679039860"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039862"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039860"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039862"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039860"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039861"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-115"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039860"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039860"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039861"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-116"></a><a name="asyncWithUnmask"><a href="Control.Concurrent.Async.Lifted.html#asyncWithUnmask"><span class="hs-identifier">asyncWithUnmask</span></a></a><span> </span><a name="local-6989586621679039870"><a href="#local-6989586621679039870"><span class="hs-identifier">actionWith</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-117"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#asyncUsing"><span class="hs-identifier hs-var">asyncUsing</span></a><span> </span><span class="hs-identifier hs-var">A.async</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039870"><span class="hs-identifier hs-var">actionWith</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">liftBaseOp_</span><span> </span><span class="hs-identifier hs-var">unsafeUnmask</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-118"></a><span>
</span><a name="line-119"></a><span class="hs-comment">-- | Generalized version of 'A.asyncOnWithUnmask'.</span><span>
</span><a name="line-120"></a><span class="hs-identifier">asyncOnWithUnmask</span><span>
</span><a name="line-121"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039857"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-122"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-123"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679039859"><a href="#local-6989586621679039859"><span class="hs-identifier">b</span></a></a><span class="hs-operator">.</span><span> </span><a href="#local-6989586621679039857"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039859"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039857"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039859"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039857"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039858"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-124"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039857"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039857"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039858"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-125"></a><a name="asyncOnWithUnmask"><a href="Control.Concurrent.Async.Lifted.html#asyncOnWithUnmask"><span class="hs-identifier">asyncOnWithUnmask</span></a></a><span> </span><a name="local-6989586621679039871"><a href="#local-6989586621679039871"><span class="hs-identifier">cpu</span></a></a><span> </span><a name="local-6989586621679039872"><a href="#local-6989586621679039872"><span class="hs-identifier">actionWith</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-126"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#asyncUsing"><span class="hs-identifier hs-var">asyncUsing</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">A.asyncOn</span><span> </span><a href="#local-6989586621679039871"><span class="hs-identifier hs-var">cpu</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039872"><span class="hs-identifier hs-var">actionWith</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">liftBaseOp_</span><span> </span><span class="hs-identifier hs-var">unsafeUnmask</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-127"></a><span>
</span><a name="line-128"></a><span class="hs-identifier">asyncUsing</span><span>
</span><a name="line-129"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039855"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-130"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039855"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039856"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039855"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039856"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-131"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039855"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039856"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-132"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039855"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039855"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039856"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-133"></a><a name="asyncUsing"><a href="Control.Concurrent.Async.Lifted.html#asyncUsing"><span class="hs-identifier">asyncUsing</span></a></a><span> </span><a name="local-6989586621679039873"><a href="#local-6989586621679039873"><span class="hs-identifier">fork</span></a></a><span> </span><a name="local-6989586621679039874"><a href="#local-6989586621679039874"><span class="hs-identifier">m</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-134"></a><span>  </span><span class="hs-identifier hs-var">liftBaseWith</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679039875"><a href="#local-6989586621679039875"><span class="hs-identifier">runInIO</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039873"><span class="hs-identifier hs-var">fork</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039875"><span class="hs-identifier hs-var">runInIO</span></a><span> </span><a href="#local-6989586621679039874"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-135"></a><span>
</span><a name="line-136"></a><span class="hs-comment">-- | Generalized version of 'A.withAsync'.</span><span>
</span><a name="line-137"></a><span class="hs-identifier">withAsync</span><span>
</span><a name="line-138"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039852"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-139"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679039852"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039853"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-140"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039852"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039853"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039852"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039854"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-141"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039852"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039854"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-142"></a><a name="withAsync"><a href="Control.Concurrent.Async.Lifted.html#withAsync"><span class="hs-identifier">withAsync</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#withAsyncUsing"><span class="hs-identifier hs-var">withAsyncUsing</span></a><span> </span><a href="Control.Concurrent.Async.Lifted.html#async"><span class="hs-identifier hs-var">async</span></a><span>
</span><a name="line-143"></a><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">withAsync</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-144"></a><span>
</span><a name="line-145"></a><span class="hs-comment">-- | Generalized version of 'A.withAsyncBound'.</span><span>
</span><a name="line-146"></a><span class="hs-identifier">withAsyncBound</span><span>
</span><a name="line-147"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039849"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-148"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679039849"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039850"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-149"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039849"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039850"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039849"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039851"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-150"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039849"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039851"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-151"></a><a name="withAsyncBound"><a href="Control.Concurrent.Async.Lifted.html#withAsyncBound"><span class="hs-identifier">withAsyncBound</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#withAsyncUsing"><span class="hs-identifier hs-var">withAsyncUsing</span></a><span> </span><a href="Control.Concurrent.Async.Lifted.html#asyncBound"><span class="hs-identifier hs-var">asyncBound</span></a><span>
</span><a name="line-152"></a><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">withAsyncBound</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-153"></a><span>
</span><a name="line-154"></a><span class="hs-comment">-- | Generalized version of 'A.withAsyncOn'.</span><span>
</span><a name="line-155"></a><span class="hs-identifier">withAsyncOn</span><span>
</span><a name="line-156"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039846"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-157"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-158"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039846"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039847"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-159"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039846"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039847"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039846"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039848"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-160"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039846"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039848"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-161"></a><a name="withAsyncOn"><a href="Control.Concurrent.Async.Lifted.html#withAsyncOn"><span class="hs-identifier">withAsyncOn</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#withAsyncUsing"><span class="hs-identifier hs-var">withAsyncUsing</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#asyncOn"><span class="hs-identifier hs-var">asyncOn</span></a><span>
</span><a name="line-162"></a><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">withAsyncOn</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-163"></a><span>
</span><a name="line-164"></a><span class="hs-comment">-- | Generalized version of 'A.withAsyncWithUnmask'.</span><span>
</span><a name="line-165"></a><span class="hs-identifier">withAsyncWithUnmask</span><span>
</span><a name="line-166"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039842"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-167"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679039845"><a href="#local-6989586621679039845"><span class="hs-identifier">c</span></a></a><span class="hs-operator">.</span><span> </span><a href="#local-6989586621679039842"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039845"><span class="hs-identifier hs-type">c</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039842"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039845"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039842"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039843"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-168"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039842"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039843"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039842"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039844"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-169"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039842"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039844"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-170"></a><a name="withAsyncWithUnmask"><a href="Control.Concurrent.Async.Lifted.html#withAsyncWithUnmask"><span class="hs-identifier">withAsyncWithUnmask</span></a></a><span> </span><a name="local-6989586621679039876"><a href="#local-6989586621679039876"><span class="hs-identifier">actionWith</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-171"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#withAsyncUsing"><span class="hs-identifier hs-var">withAsyncUsing</span></a><span> </span><a href="Control.Concurrent.Async.Lifted.html#async"><span class="hs-identifier hs-var">async</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039876"><span class="hs-identifier hs-var">actionWith</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">liftBaseOp_</span><span> </span><span class="hs-identifier hs-var">unsafeUnmask</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-172"></a><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">withAsyncWithUnmask</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-173"></a><span>
</span><a name="line-174"></a><span class="hs-comment">-- | Generalized version of 'A.withAsyncOnWithUnmask'.</span><span>
</span><a name="line-175"></a><span class="hs-identifier">withAsyncOnWithUnmask</span><span>
</span><a name="line-176"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039838"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-177"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-178"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679039841"><a href="#local-6989586621679039841"><span class="hs-identifier">c</span></a></a><span class="hs-operator">.</span><span> </span><a href="#local-6989586621679039838"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039841"><span class="hs-identifier hs-type">c</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039838"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039841"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039838"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039839"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-179"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039838"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039839"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039838"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039840"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-180"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039838"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039840"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-181"></a><a name="withAsyncOnWithUnmask"><a href="Control.Concurrent.Async.Lifted.html#withAsyncOnWithUnmask"><span class="hs-identifier">withAsyncOnWithUnmask</span></a></a><span> </span><a name="local-6989586621679039877"><a href="#local-6989586621679039877"><span class="hs-identifier">cpu</span></a></a><span> </span><a name="local-6989586621679039878"><a href="#local-6989586621679039878"><span class="hs-identifier">actionWith</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-182"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#withAsyncUsing"><span class="hs-identifier hs-var">withAsyncUsing</span></a><span> </span><span class="hs-special">(</span><a href="Control.Concurrent.Async.Lifted.html#asyncOn"><span class="hs-identifier hs-var">asyncOn</span></a><span> </span><a href="#local-6989586621679039877"><span class="hs-identifier hs-var">cpu</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039878"><span class="hs-identifier hs-var">actionWith</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">liftBaseOp_</span><span> </span><span class="hs-identifier hs-var">unsafeUnmask</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-183"></a><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">withAsyncOnWithUnmask</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-184"></a><span>
</span><a name="line-185"></a><span class="hs-identifier">withAsyncUsing</span><span>
</span><a name="line-186"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039835"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-187"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039835"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039836"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039835"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039835"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039836"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-188"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039835"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039836"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-189"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039835"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039836"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039835"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039837"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-190"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039835"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039837"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-191"></a><a name="withAsyncUsing"><a href="Control.Concurrent.Async.Lifted.html#withAsyncUsing"><span class="hs-identifier">withAsyncUsing</span></a></a><span> </span><a name="local-6989586621679039879"><a href="#local-6989586621679039879"><span class="hs-identifier">fork</span></a></a><span> </span><a name="local-6989586621679039880"><a href="#local-6989586621679039880"><span class="hs-identifier">action</span></a></a><span> </span><a name="local-6989586621679039881"><a href="#local-6989586621679039881"><span class="hs-identifier">inner</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">E.mask</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679039882"><a href="#local-6989586621679039882"><span class="hs-identifier">restore</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-192"></a><span>  </span><a name="local-6989586621679039883"><a href="#local-6989586621679039883"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679039879"><span class="hs-identifier hs-var">fork</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679039882"><span class="hs-identifier hs-var">restore</span></a><span> </span><a href="#local-6989586621679039880"><span class="hs-identifier hs-var">action</span></a><span>
</span><a name="line-193"></a><span>  </span><a name="local-6989586621679039885"><a href="#local-6989586621679039885"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679039882"><span class="hs-identifier hs-var">restore</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039881"><span class="hs-identifier hs-var">inner</span></a><span> </span><a href="#local-6989586621679039883"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">E.catch</span><span class="hs-special">`</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679039884"><a href="#local-6989586621679039884"><span class="hs-identifier">e</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-194"></a><span>    </span><a href="Control.Concurrent.Async.Lifted.html#cancel"><span class="hs-identifier hs-var">cancel</span></a><span> </span><a href="#local-6989586621679039883"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-195"></a><span>    </span><span class="hs-identifier hs-var">E.throwIO</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039884"><span class="hs-identifier hs-var">e</span></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">SomeException</span><span class="hs-special">)</span><span>
</span><a name="line-196"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#cancel"><span class="hs-identifier hs-var">cancel</span></a><span> </span><a href="#local-6989586621679039883"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-197"></a><span>  </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679039885"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-198"></a><span>
</span><a name="line-199"></a><span class="hs-comment">-- | Generalized version of 'A.wait'.</span><span>
</span><a name="line-200"></a><span class="hs-identifier">wait</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039833"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039833"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039834"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039833"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039834"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-201"></a><a name="wait"><a href="Control.Concurrent.Async.Lifted.html#wait"><span class="hs-identifier">wait</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">A.wait</span><span> </span><span class="hs-operator hs-var">&gt;=&gt;</span><span> </span><span class="hs-identifier hs-var">restoreM</span><span>
</span><a name="line-202"></a><span>
</span><a name="line-203"></a><span class="hs-comment">-- | Generalized version of 'A.poll'.</span><span>
</span><a name="line-204"></a><span class="hs-identifier">poll</span><span>
</span><a name="line-205"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039831"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-206"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039831"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039832"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-207"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039831"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">SomeException</span><span> </span><a href="#local-6989586621679039832"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-208"></a><a name="poll"><a href="Control.Concurrent.Async.Lifted.html#poll"><span class="hs-identifier">poll</span></a></a><span> </span><a name="local-6989586621679039886"><a href="#local-6989586621679039886"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-209"></a><span>  </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">A.poll</span><span> </span><a href="#local-6989586621679039886"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span>
</span><a name="line-210"></a><span>  </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#sequenceEither"><span class="hs-identifier hs-var">sequenceEither</span></a><span class="hs-special">)</span><span>
</span><a name="line-211"></a><span>
</span><a name="line-212"></a><span class="hs-comment">-- | Generalized version of 'A.cancel'.</span><span>
</span><a name="line-213"></a><span class="hs-identifier">cancel</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBase</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039829"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><a href="#local-6989586621679039830"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039829"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-214"></a><a name="cancel"><a href="Control.Concurrent.Async.Lifted.html#cancel"><span class="hs-identifier">cancel</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">A.cancel</span><span>
</span><a name="line-215"></a><span>
</span><a name="line-216"></a><span class="hs-comment">-- | Generalized version of 'A.cancelWith'.</span><span>
</span><a name="line-217"></a><span class="hs-identifier">cancelWith</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">MonadBase</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039826"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Exception</span><span> </span><a href="#local-6989586621679039827"><span class="hs-identifier hs-type">e</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><a href="#local-6989586621679039828"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039827"><span class="hs-identifier hs-type">e</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039826"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-218"></a><a name="cancelWith"><a href="Control.Concurrent.Async.Lifted.html#cancelWith"><span class="hs-identifier">cancelWith</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-operator hs-var">.</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">A.cancelWith</span><span>
</span><a name="line-219"></a><span>
</span><a name="line-220"></a><span class="hs-comment">-- | Generalized version of 'A.uninterruptibleCancel'.</span><span>
</span><a name="line-221"></a><span class="hs-identifier">uninterruptibleCancel</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBase</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039824"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><a href="#local-6989586621679039825"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039824"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-222"></a><a name="uninterruptibleCancel"><a href="Control.Concurrent.Async.Lifted.html#uninterruptibleCancel"><span class="hs-identifier">uninterruptibleCancel</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">A.uninterruptibleCancel</span><span>
</span><a name="line-223"></a><span>
</span><a name="line-224"></a><span class="hs-comment">-- | Generalized version of 'A.waitCatch'.</span><span>
</span><a name="line-225"></a><span class="hs-identifier">waitCatch</span><span>
</span><a name="line-226"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039822"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-227"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039822"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039823"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-228"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039822"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">SomeException</span><span> </span><a href="#local-6989586621679039823"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-229"></a><a name="waitCatch"><a href="Control.Concurrent.Async.Lifted.html#waitCatch"><span class="hs-identifier">waitCatch</span></a></a><span> </span><a name="local-6989586621679039911"><a href="#local-6989586621679039911"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">A.waitCatch</span><span> </span><a href="#local-6989586621679039911"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#sequenceEither"><span class="hs-identifier hs-var">sequenceEither</span></a><span>
</span><a name="line-230"></a><span>
</span><a name="line-231"></a><span class="hs-comment">-- | Generalized version of 'A.waitAny'.</span><span>
</span><a name="line-232"></a><span class="hs-identifier">waitAny</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039820"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039820"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039821"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039820"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039820"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039821"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679039821"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-233"></a><a name="waitAny"><a href="Control.Concurrent.Async.Lifted.html#waitAny"><span class="hs-identifier">waitAny</span></a></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-234"></a><span>  </span><span class="hs-special">(</span><a name="local-6989586621679039913"><a href="#local-6989586621679039913"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679039914"><a href="#local-6989586621679039914"><span class="hs-identifier">s</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">A.waitAny</span><span> </span><span class="hs-keyword">as</span><span>
</span><a name="line-235"></a><span>  </span><a name="local-6989586621679039915"><a href="#local-6989586621679039915"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">restoreM</span><span> </span><a href="#local-6989586621679039914"><span class="hs-identifier hs-var">s</span></a><span>
</span><a name="line-236"></a><span>  </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039913"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679039915"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-237"></a><span>
</span><a name="line-238"></a><span class="hs-comment">-- | Generalized version of 'A.waitAnyCatch'.</span><span>
</span><a name="line-239"></a><span class="hs-identifier">waitAnyCatch</span><span>
</span><a name="line-240"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039818"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-241"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039818"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039819"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-242"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039818"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039818"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039819"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">SomeException</span><span> </span><a href="#local-6989586621679039819"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-243"></a><a name="waitAnyCatch"><a href="Control.Concurrent.Async.Lifted.html#waitAnyCatch"><span class="hs-identifier">waitAnyCatch</span></a></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-244"></a><span>  </span><span class="hs-special">(</span><a name="local-6989586621679039917"><a href="#local-6989586621679039917"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679039918"><a href="#local-6989586621679039918"><span class="hs-identifier">s</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">A.waitAnyCatch</span><span> </span><span class="hs-keyword">as</span><span>
</span><a name="line-245"></a><span>  </span><a name="local-6989586621679039919"><a href="#local-6989586621679039919"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#sequenceEither"><span class="hs-identifier hs-var">sequenceEither</span></a><span> </span><a href="#local-6989586621679039918"><span class="hs-identifier hs-var">s</span></a><span>
</span><a name="line-246"></a><span>  </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039917"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679039919"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-247"></a><span>
</span><a name="line-248"></a><span class="hs-comment">-- | Generalized version of 'A.waitAnyCancel'.</span><span>
</span><a name="line-249"></a><span class="hs-identifier">waitAnyCancel</span><span>
</span><a name="line-250"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039816"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-251"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039816"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039817"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-252"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039816"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039816"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039817"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679039817"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-253"></a><a name="waitAnyCancel"><a href="Control.Concurrent.Async.Lifted.html#waitAnyCancel"><span class="hs-identifier">waitAnyCancel</span></a></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-254"></a><span>  </span><span class="hs-special">(</span><a name="local-6989586621679039921"><a href="#local-6989586621679039921"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679039922"><a href="#local-6989586621679039922"><span class="hs-identifier">s</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">A.waitAnyCancel</span><span> </span><span class="hs-keyword">as</span><span>
</span><a name="line-255"></a><span>  </span><a name="local-6989586621679039923"><a href="#local-6989586621679039923"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">restoreM</span><span> </span><a href="#local-6989586621679039922"><span class="hs-identifier hs-var">s</span></a><span>
</span><a name="line-256"></a><span>  </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039921"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679039923"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-257"></a><span>
</span><a name="line-258"></a><span class="hs-comment">-- | Generalized version of 'A.waitAnyCatchCancel'.</span><span>
</span><a name="line-259"></a><span class="hs-identifier">waitAnyCatchCancel</span><span>
</span><a name="line-260"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039814"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-261"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039814"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039815"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-262"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039814"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039814"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039815"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">SomeException</span><span> </span><a href="#local-6989586621679039815"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-263"></a><a name="waitAnyCatchCancel"><a href="Control.Concurrent.Async.Lifted.html#waitAnyCatchCancel"><span class="hs-identifier">waitAnyCatchCancel</span></a></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-264"></a><span>  </span><span class="hs-special">(</span><a name="local-6989586621679039925"><a href="#local-6989586621679039925"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679039926"><a href="#local-6989586621679039926"><span class="hs-identifier">s</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">A.waitAnyCatchCancel</span><span> </span><span class="hs-keyword">as</span><span>
</span><a name="line-265"></a><span>  </span><a name="local-6989586621679039927"><a href="#local-6989586621679039927"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#sequenceEither"><span class="hs-identifier hs-var">sequenceEither</span></a><span> </span><a href="#local-6989586621679039926"><span class="hs-identifier hs-var">s</span></a><span>
</span><a name="line-266"></a><span>  </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039925"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679039927"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-267"></a><span>
</span><a name="line-268"></a><span class="hs-comment">-- | Generalized version of 'A.waitEither'.</span><span>
</span><a name="line-269"></a><span class="hs-identifier">waitEither</span><span>
</span><a name="line-270"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039811"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-271"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039811"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039812"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-272"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039811"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039813"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-273"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039811"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679039812"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679039813"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-274"></a><a name="waitEither"><a href="Control.Concurrent.Async.Lifted.html#waitEither"><span class="hs-identifier">waitEither</span></a></a><span> </span><a name="local-6989586621679039928"><a href="#local-6989586621679039928"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679039929"><a href="#local-6989586621679039929"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-275"></a><span>  </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">A.waitEither</span><span> </span><a href="#local-6989586621679039928"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679039929"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span>
</span><a name="line-276"></a><span>  </span><span class="hs-identifier hs-var">either</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">restoreM</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">restoreM</span><span class="hs-special">)</span><span>
</span><a name="line-277"></a><span>
</span><a name="line-278"></a><span class="hs-comment">-- | Generalized version of 'A.waitEitherCatch'.</span><span>
</span><a name="line-279"></a><span class="hs-identifier">waitEitherCatch</span><span>
</span><a name="line-280"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039808"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-281"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039808"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039809"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-282"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039808"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039810"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-283"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039808"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">SomeException</span><span> </span><a href="#local-6989586621679039809"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">SomeException</span><span> </span><a href="#local-6989586621679039810"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-284"></a><a name="waitEitherCatch"><a href="Control.Concurrent.Async.Lifted.html#waitEitherCatch"><span class="hs-identifier">waitEitherCatch</span></a></a><span> </span><a name="local-6989586621679039930"><a href="#local-6989586621679039930"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679039931"><a href="#local-6989586621679039931"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-285"></a><span>  </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">A.waitEitherCatch</span><span> </span><a href="#local-6989586621679039930"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679039931"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span>
</span><a name="line-286"></a><span>  </span><span class="hs-identifier hs-var">either</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#sequenceEither"><span class="hs-identifier hs-var">sequenceEither</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#sequenceEither"><span class="hs-identifier hs-var">sequenceEither</span></a><span class="hs-special">)</span><span>
</span><a name="line-287"></a><span>
</span><a name="line-288"></a><span class="hs-comment">-- | Generalized version of 'A.waitEitherCancel'.</span><span>
</span><a name="line-289"></a><span class="hs-identifier">waitEitherCancel</span><span>
</span><a name="line-290"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039805"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-291"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039805"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039806"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-292"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039805"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039807"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-293"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039805"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679039806"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679039807"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-294"></a><a name="waitEitherCancel"><a href="Control.Concurrent.Async.Lifted.html#waitEitherCancel"><span class="hs-identifier">waitEitherCancel</span></a></a><span> </span><a name="local-6989586621679039932"><a href="#local-6989586621679039932"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679039933"><a href="#local-6989586621679039933"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-295"></a><span>  </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">A.waitEitherCancel</span><span> </span><a href="#local-6989586621679039932"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679039933"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span>
</span><a name="line-296"></a><span>  </span><span class="hs-identifier hs-var">either</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">restoreM</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">restoreM</span><span class="hs-special">)</span><span>
</span><a name="line-297"></a><span>
</span><a name="line-298"></a><span class="hs-comment">-- | Generalized version of 'A.waitEitherCatchCancel'.</span><span>
</span><a name="line-299"></a><span class="hs-identifier">waitEitherCatchCancel</span><span>
</span><a name="line-300"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039491"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-301"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039491"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039492"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-302"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039491"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039493"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-303"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039491"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">SomeException</span><span> </span><a href="#local-6989586621679039492"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">SomeException</span><span> </span><a href="#local-6989586621679039493"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-304"></a><a name="waitEitherCatchCancel"><a href="Control.Concurrent.Async.Lifted.html#waitEitherCatchCancel"><span class="hs-identifier">waitEitherCatchCancel</span></a></a><span> </span><a name="local-6989586621679039934"><a href="#local-6989586621679039934"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679039935"><a href="#local-6989586621679039935"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-305"></a><span>  </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">A.waitEitherCatch</span><span> </span><a href="#local-6989586621679039934"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679039935"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span>
</span><a name="line-306"></a><span>  </span><span class="hs-identifier hs-var">either</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#sequenceEither"><span class="hs-identifier hs-var">sequenceEither</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#sequenceEither"><span class="hs-identifier hs-var">sequenceEither</span></a><span class="hs-special">)</span><span>
</span><a name="line-307"></a><span>
</span><a name="line-308"></a><span class="hs-comment">-- | Generalized version of 'A.waitEither_'.</span><span>
</span><a name="line-309"></a><span class="hs-comment">--</span><span>
</span><a name="line-310"></a><span class="hs-comment">-- NOTE: This function discards the monadic effects besides IO in the forked</span><span>
</span><a name="line-311"></a><span class="hs-comment">-- computation.</span><span>
</span><a name="line-312"></a><span class="hs-identifier">waitEither_</span><span>
</span><a name="line-313"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBase</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039488"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-314"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><a href="#local-6989586621679039489"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-315"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><a href="#local-6989586621679039490"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-316"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039488"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-317"></a><a name="waitEither_"><a href="Control.Concurrent.Async.Lifted.html#waitEither_"><span class="hs-identifier">waitEither_</span></a></a><span> </span><a name="local-6989586621679039936"><a href="#local-6989586621679039936"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679039937"><a href="#local-6989586621679039937"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">A.waitEither_</span><span> </span><a href="#local-6989586621679039936"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679039937"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-318"></a><span>
</span><a name="line-319"></a><span class="hs-comment">-- | Generalized version of 'A.waitBoth'.</span><span>
</span><a name="line-320"></a><span class="hs-identifier">waitBoth</span><span>
</span><a name="line-321"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039485"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-322"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039485"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039486"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-323"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039485"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039487"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-324"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039485"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039486"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679039487"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-325"></a><a name="waitBoth"><a href="Control.Concurrent.Async.Lifted.html#waitBoth"><span class="hs-identifier">waitBoth</span></a></a><span> </span><a name="local-6989586621679039938"><a href="#local-6989586621679039938"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679039939"><a href="#local-6989586621679039939"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-326"></a><span>  </span><span class="hs-special">(</span><a name="local-6989586621679039940"><a href="#local-6989586621679039940"><span class="hs-identifier">sa</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679039941"><a href="#local-6989586621679039941"><span class="hs-identifier">sb</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">A.waitBoth</span><span> </span><a href="#local-6989586621679039938"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679039939"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-327"></a><span>  </span><a name="local-6989586621679039942"><a href="#local-6989586621679039942"><span class="hs-identifier">ra</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">restoreM</span><span> </span><a href="#local-6989586621679039940"><span class="hs-identifier hs-var">sa</span></a><span>
</span><a name="line-328"></a><span>  </span><a name="local-6989586621679039943"><a href="#local-6989586621679039943"><span class="hs-identifier">rb</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">restoreM</span><span> </span><a href="#local-6989586621679039941"><span class="hs-identifier hs-var">sb</span></a><span>
</span><a name="line-329"></a><span>  </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039942"><span class="hs-identifier hs-var">ra</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679039943"><span class="hs-identifier hs-var">rb</span></a><span class="hs-special">)</span><span>
</span><a name="line-330"></a><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">waitBoth</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-331"></a><span>
</span><a name="line-332"></a><span class="hs-comment">-- | Generalized version of 'A.link'.</span><span>
</span><a name="line-333"></a><span class="hs-identifier">link</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBase</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039483"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><a href="#local-6989586621679039484"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039483"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-334"></a><a name="link"><a href="Control.Concurrent.Async.Lifted.html#link"><span class="hs-identifier">link</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">A.link</span><span>
</span><a name="line-335"></a><span>
</span><a name="line-336"></a><span class="hs-comment">-- | Generalized version of 'A.link2'.</span><span>
</span><a name="line-337"></a><span class="hs-identifier">link2</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBase</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039480"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><a href="#local-6989586621679039481"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Async</span><span> </span><a href="#local-6989586621679039482"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039480"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-338"></a><a name="link2"><a href="Control.Concurrent.Async.Lifted.html#link2"><span class="hs-identifier">link2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">liftBase</span><span> </span><span class="hs-operator hs-var">.</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">A.link2</span><span>
</span><a name="line-339"></a><span>
</span><a name="line-340"></a><span class="hs-comment">-- | Generalized version of 'A.race'.</span><span>
</span><a name="line-341"></a><span class="hs-identifier">race</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039477"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679039477"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039478"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039477"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039479"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039477"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679039478"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679039479"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-342"></a><a name="race"><a href="Control.Concurrent.Async.Lifted.html#race"><span class="hs-identifier">race</span></a></a><span> </span><a name="local-6989586621679039944"><a href="#local-6989586621679039944"><span class="hs-identifier">left</span></a></a><span> </span><a name="local-6989586621679039945"><a href="#local-6989586621679039945"><span class="hs-identifier">right</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-343"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#withAsync"><span class="hs-identifier hs-var">withAsync</span></a><span> </span><a href="#local-6989586621679039944"><span class="hs-identifier hs-var">left</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679039946"><a href="#local-6989586621679039946"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-344"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#withAsync"><span class="hs-identifier hs-var">withAsync</span></a><span> </span><a href="#local-6989586621679039945"><span class="hs-identifier hs-var">right</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679039947"><a href="#local-6989586621679039947"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-345"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#waitEither"><span class="hs-identifier hs-var">waitEither</span></a><span> </span><a href="#local-6989586621679039946"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679039947"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-346"></a><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">race</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-347"></a><span>
</span><a name="line-348"></a><span class="hs-comment">-- | Generalized version of 'A.race_'.</span><span>
</span><a name="line-349"></a><span class="hs-comment">--</span><span>
</span><a name="line-350"></a><span class="hs-comment">-- NOTE: This function discards the monadic effects besides IO in the forked</span><span>
</span><a name="line-351"></a><span class="hs-comment">-- computation.</span><span>
</span><a name="line-352"></a><span class="hs-identifier">race_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039474"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679039474"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039475"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039474"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039476"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039474"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-353"></a><a name="race_"><a href="Control.Concurrent.Async.Lifted.html#race_"><span class="hs-identifier">race_</span></a></a><span> </span><a name="local-6989586621679039948"><a href="#local-6989586621679039948"><span class="hs-identifier">left</span></a></a><span> </span><a name="local-6989586621679039949"><a href="#local-6989586621679039949"><span class="hs-identifier">right</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-354"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#withAsync"><span class="hs-identifier hs-var">withAsync</span></a><span> </span><a href="#local-6989586621679039948"><span class="hs-identifier hs-var">left</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679039950"><a href="#local-6989586621679039950"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-355"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#withAsync"><span class="hs-identifier hs-var">withAsync</span></a><span> </span><a href="#local-6989586621679039949"><span class="hs-identifier hs-var">right</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679039951"><a href="#local-6989586621679039951"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-356"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#waitEither_"><span class="hs-identifier hs-var">waitEither_</span></a><span> </span><a href="#local-6989586621679039950"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679039951"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-357"></a><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">race_</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-358"></a><span>
</span><a name="line-359"></a><span class="hs-comment">-- | Generalized version of 'A.concurrently'.</span><span>
</span><a name="line-360"></a><span class="hs-identifier">concurrently</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039471"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679039471"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039472"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039471"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039473"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039471"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039472"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679039473"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-361"></a><a name="concurrently"><a href="Control.Concurrent.Async.Lifted.html#concurrently"><span class="hs-identifier">concurrently</span></a></a><span> </span><a name="local-6989586621679039952"><a href="#local-6989586621679039952"><span class="hs-identifier">left</span></a></a><span> </span><a name="local-6989586621679039953"><a href="#local-6989586621679039953"><span class="hs-identifier">right</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-362"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#withAsync"><span class="hs-identifier hs-var">withAsync</span></a><span> </span><a href="#local-6989586621679039952"><span class="hs-identifier hs-var">left</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679039954"><a href="#local-6989586621679039954"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-363"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#withAsync"><span class="hs-identifier hs-var">withAsync</span></a><span> </span><a href="#local-6989586621679039953"><span class="hs-identifier hs-var">right</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679039955"><a href="#local-6989586621679039955"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-364"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#waitBoth"><span class="hs-identifier hs-var">waitBoth</span></a><span> </span><a href="#local-6989586621679039954"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679039955"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-365"></a><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">concurrently</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-366"></a><span>
</span><a name="line-367"></a><span class="hs-comment">-- | Generalized version of 'A.concurrently_'.</span><span>
</span><a name="line-368"></a><span class="hs-identifier">concurrently_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039468"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679039468"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039469"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039468"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039470"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039468"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-369"></a><a name="concurrently_"><a href="Control.Concurrent.Async.Lifted.html#concurrently_"><span class="hs-identifier">concurrently_</span></a></a><span> </span><a name="local-6989586621679039956"><a href="#local-6989586621679039956"><span class="hs-identifier">left</span></a></a><span> </span><a name="local-6989586621679039957"><a href="#local-6989586621679039957"><span class="hs-identifier">right</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">void</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#concurrently"><span class="hs-identifier hs-var">concurrently</span></a><span> </span><a href="#local-6989586621679039956"><span class="hs-identifier hs-var">left</span></a><span> </span><a href="#local-6989586621679039957"><span class="hs-identifier hs-var">right</span></a><span>
</span><a name="line-370"></a><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">concurrently_</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-371"></a><span>
</span><a name="line-372"></a><span class="hs-comment">-- | Generalized version of 'A.mapConcurrently'.</span><span>
</span><a name="line-373"></a><span class="hs-identifier">mapConcurrently</span><span>
</span><a name="line-374"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Traversable</span><span> </span><a href="#local-6989586621679039464"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039465"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-375"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039466"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039465"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039467"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-376"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039464"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679039466"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-377"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039465"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039464"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679039467"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-378"></a><a name="mapConcurrently"><a href="Control.Concurrent.Async.Lifted.html#mapConcurrently"><span class="hs-identifier">mapConcurrently</span></a></a><span> </span><a name="local-6989586621679039958"><a href="#local-6989586621679039958"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">runConcurrently</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">traverse</span><span> </span><span class="hs-special">(</span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-var">Concurrently</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="#local-6989586621679039958"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span>
</span><a name="line-379"></a><span>
</span><a name="line-380"></a><span class="hs-comment">-- | Generalized version of 'A.mapConcurrently_'.</span><span>
</span><a name="line-381"></a><span class="hs-identifier">mapConcurrently_</span><span>
</span><a name="line-382"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Foldable</span><span> </span><a href="#local-6989586621679039460"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039461"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-383"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039462"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039461"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039463"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-384"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039460"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679039462"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-385"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039461"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-386"></a><a name="mapConcurrently_"><a href="Control.Concurrent.Async.Lifted.html#mapConcurrently_"><span class="hs-identifier">mapConcurrently_</span></a></a><span> </span><a name="local-6989586621679039959"><a href="#local-6989586621679039959"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">runConcurrently</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">foldMap</span><span> </span><span class="hs-special">(</span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-var">Concurrently</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">void</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="#local-6989586621679039959"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span>
</span><a name="line-387"></a><span>
</span><a name="line-388"></a><span class="hs-comment">-- | Generalized version of 'A.forConcurrently'.</span><span>
</span><a name="line-389"></a><span class="hs-identifier">forConcurrently</span><span>
</span><a name="line-390"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Traversable</span><span> </span><a href="#local-6989586621679039095"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039096"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-391"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679039095"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679039097"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-392"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039097"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039096"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039098"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-393"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039096"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039095"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679039098"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-394"></a><a name="forConcurrently"><a href="Control.Concurrent.Async.Lifted.html#forConcurrently"><span class="hs-identifier">forConcurrently</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">flip</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#mapConcurrently"><span class="hs-identifier hs-var">mapConcurrently</span></a><span>
</span><a name="line-395"></a><span>
</span><a name="line-396"></a><span class="hs-comment">-- | Generalized version of 'A.forConcurrently_'.</span><span>
</span><a name="line-397"></a><span class="hs-identifier">forConcurrently_</span><span>
</span><a name="line-398"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Foldable</span><span> </span><a href="#local-6989586621679039091"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039092"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-399"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679039091"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679039093"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-400"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679039093"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039092"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039094"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-401"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039092"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-402"></a><a name="forConcurrently_"><a href="Control.Concurrent.Async.Lifted.html#forConcurrently_"><span class="hs-identifier">forConcurrently_</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">flip</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#mapConcurrently_"><span class="hs-identifier hs-var">mapConcurrently_</span></a><span>
</span><a name="line-403"></a><span>
</span><a name="line-404"></a><span class="hs-comment">-- | Generalized version of 'A.replicateConcurrently'.</span><span>
</span><a name="line-405"></a><span class="hs-identifier">replicateConcurrently</span><span>
</span><a name="line-406"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039089"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-407"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-408"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039089"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039090"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-409"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039089"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679039090"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span>
</span><a name="line-410"></a><a name="replicateConcurrently"><a href="Control.Concurrent.Async.Lifted.html#replicateConcurrently"><span class="hs-identifier">replicateConcurrently</span></a></a><span> </span><a name="local-6989586621679039960"><a href="#local-6989586621679039960"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-411"></a><span>  </span><span class="hs-identifier">runConcurrently</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">sequenceA</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">replicate</span><span> </span><a href="#local-6989586621679039960"><span class="hs-identifier hs-var">n</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-var">Concurrently</span></a><span>
</span><a name="line-412"></a><span>
</span><a name="line-413"></a><span class="hs-comment">-- | Generalized version of 'A.replicateConcurrently_'.</span><span>
</span><a name="line-414"></a><span class="hs-identifier">replicateConcurrently_</span><span>
</span><a name="line-415"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039087"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-416"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-417"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039087"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039088"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-418"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039087"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-419"></a><a name="replicateConcurrently_"><a href="Control.Concurrent.Async.Lifted.html#replicateConcurrently_"><span class="hs-identifier">replicateConcurrently_</span></a></a><span> </span><a name="local-6989586621679040146"><a href="#local-6989586621679040146"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-420"></a><span>  </span><span class="hs-identifier">runConcurrently</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">fold</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">replicate</span><span> </span><a href="#local-6989586621679040146"><span class="hs-identifier hs-var">n</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-var">Concurrently</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">void</span><span>
</span><a name="line-421"></a><span>
</span><a name="line-422"></a><span class="hs-comment">-- | Generalized version of 'A.Concurrently'.</span><span>
</span><a name="line-423"></a><span class="hs-comment">--</span><span>
</span><a name="line-424"></a><span class="hs-comment">-- A value of type @'Concurrently' m a@ is an IO-based operation that can be</span><span>
</span><a name="line-425"></a><span class="hs-comment">-- composed with other 'Concurrently' values, using the 'Applicative' and</span><span>
</span><a name="line-426"></a><span class="hs-comment">-- 'Alternative' instances.</span><span>
</span><a name="line-427"></a><span class="hs-comment">--</span><span>
</span><a name="line-428"></a><span class="hs-comment">-- Calling 'runConcurrently' on a value of type @'Concurrently' m a@ will</span><span>
</span><a name="line-429"></a><span class="hs-comment">-- execute the IO-based lifted operations it contains concurrently, before</span><span>
</span><a name="line-430"></a><span class="hs-comment">-- delivering the result of type 'a'.</span><span>
</span><a name="line-431"></a><span class="hs-comment">--</span><span>
</span><a name="line-432"></a><span class="hs-comment">-- For example</span><span>
</span><a name="line-433"></a><span class="hs-comment">--</span><span>
</span><a name="line-434"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-435"></a><span class="hs-comment">--   (page1, page2, page3) &lt;- 'runConcurrently' $ (,,)</span><span>
</span><a name="line-436"></a><span class="hs-comment">--     '&lt;$&gt;' 'Concurrently' (getURL &quot;url1&quot;)</span><span>
</span><a name="line-437"></a><span class="hs-comment">--     '&lt;*&gt;' 'Concurrently' (getURL &quot;url2&quot;)</span><span>
</span><a name="line-438"></a><span class="hs-comment">--     '&lt;*&gt;' 'Concurrently' (getURL &quot;url3&quot;)</span><span>
</span><a name="line-439"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-440"></a><span class="hs-keyword">newtype</span><span> </span><a name="Concurrently"><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier">Concurrently</span></a></a><span> </span><a name="local-6989586621679038337"><a href="#local-6989586621679038337"><span class="hs-identifier">m</span></a></a><span> </span><a name="local-6989586621679038338"><a href="#local-6989586621679038338"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Concurrently"><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier">Concurrently</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="runConcurrently"><a href="Control.Concurrent.Async.Lifted.html#runConcurrently"><span class="hs-identifier">runConcurrently</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679038337"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679038338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-441"></a><span>
</span><a name="line-442"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><a href="#local-6989586621679039081"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-type">Concurrently</span></a><span> </span><a href="#local-6989586621679039081"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-443"></a><span>  </span><a name="local-3458764513820541101"><span class="hs-identifier">fmap</span></a><span> </span><a name="local-6989586621679039082"><a href="#local-6989586621679039082"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-special">(</span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-var">Concurrently</span></a><span> </span><a name="local-6989586621679039083"><a href="#local-6989586621679039083"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-var">Concurrently</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679039082"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="#local-6989586621679039083"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-444"></a><span>
</span><a name="line-445"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039063"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-type">Concurrently</span></a><span> </span><a href="#local-6989586621679039063"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-446"></a><span>  </span><a name="local-3458764513820541680"><span class="hs-identifier">pure</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-var">Concurrently</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">pure</span><span>
</span><a name="line-447"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-var">Concurrently</span></a><span> </span><a name="local-6989586621679039064"><a href="#local-6989586621679039064"><span class="hs-identifier">fs</span></a></a><span> </span><a name="local-3458764513820541679"><span class="hs-operator">&lt;*&gt;</span></a><span> </span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-var">Concurrently</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-448"></a><span>    </span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-var">Concurrently</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">uncurry</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">$</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#concurrently"><span class="hs-identifier hs-var">concurrently</span></a><span> </span><a href="#local-6989586621679039064"><span class="hs-identifier hs-var">fs</span></a><span> </span><span class="hs-keyword">as</span><span>
</span><a name="line-449"></a><span>
</span><a name="line-450"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679038343"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Alternative</span><span> </span><span class="hs-special">(</span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-type">Concurrently</span></a><span> </span><a href="#local-6989586621679038343"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-451"></a><span>  </span><a name="local-8214565720323790186"><span class="hs-identifier">empty</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-var">Concurrently</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">liftBaseWith</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">const</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">forever</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">threadDelay</span><span> </span><span class="hs-identifier hs-var">maxBound</span><span class="hs-special">)</span><span>
</span><a name="line-452"></a><span>  </span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-var">Concurrently</span></a><span> </span><span class="hs-keyword">as</span><span> </span><a name="local-8214565720323790185"><span class="hs-operator">&lt;|&gt;</span></a><span> </span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-var">Concurrently</span></a><span> </span><a name="local-6989586621679038908"><a href="#local-6989586621679038908"><span class="hs-identifier">bs</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-453"></a><span>    </span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-var">Concurrently</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">either</span><span> </span><span class="hs-identifier hs-var">id</span><span> </span><span class="hs-identifier hs-var">id</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Control.Concurrent.Async.Lifted.html#race"><span class="hs-identifier hs-var">race</span></a><span> </span><span class="hs-keyword">as</span><span> </span><a href="#local-6989586621679038908"><span class="hs-identifier hs-var">bs</span></a><span>
</span><a name="line-454"></a><span>
</span><a name="line-455"></a><span class="hs-cpp">#if MIN_VERSION_base(4, 9, 0)
</span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679038341"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Semigroup</span><span> </span><a href="#local-6989586621679038342"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><a name="line-457"></a><span>  </span><span class="hs-identifier hs-type">Semigroup</span><span> </span><span class="hs-special">(</span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-type">Concurrently</span></a><span> </span><a href="#local-6989586621679038341"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679038342"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-458"></a><span>    </span><span class="hs-special">(</span><a name="local-3458764513820541482"><span class="hs-operator">&lt;&gt;</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">liftA2</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;&gt;</span><span class="hs-special">)</span><span>
</span><a name="line-459"></a><span>
</span><a name="line-460"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679038339"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Semigroup</span><span> </span><a href="#local-6989586621679038340"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679038340"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><a name="line-461"></a><span>  </span><span class="hs-identifier hs-type">Monoid</span><span> </span><span class="hs-special">(</span><a href="Control.Concurrent.Async.Lifted.html#Concurrently"><span class="hs-identifier hs-type">Concurrently</span></a><span> </span><a href="#local-6989586621679038339"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679038340"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-462"></a><span>    </span><a name="local-3458764513820541483"><span class="hs-identifier">mempty</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-identifier hs-var">mempty</span><span>
</span><a name="line-463"></a><span>    </span><a name="local-3458764513820541484"><span class="hs-identifier">mappend</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;&gt;</span><span class="hs-special">)</span><span>
</span><a name="line-464"></a><span class="hs-cpp">#else
</span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">MonadBaseControl</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">m</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">Monoid</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">Monoid</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Concurrently</span><span> </span><span class="hs-identifier">m</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-466"></a><span>  </span><span class="hs-identifier">mempty</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">pure</span><span> </span><span class="hs-identifier">mempty</span><span>
</span><a name="line-467"></a><span>  </span><span class="hs-identifier">mappend</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">liftA2</span><span> </span><span class="hs-identifier">mappend</span><span>
</span><a name="line-468"></a><span class="hs-cpp">#endif
</span><span>
</span><a name="line-470"></a><span class="hs-identifier">sequenceEither</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadBaseControl</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679039084"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679039085"><span class="hs-identifier hs-type">e</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">StM</span><span> </span><a href="#local-6989586621679039084"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679039086"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679039084"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679039085"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679039086"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-471"></a><a name="sequenceEither"><a href="Control.Concurrent.Async.Lifted.html#sequenceEither"><span class="hs-identifier">sequenceEither</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">either</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">Left</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">restoreM</span><span class="hs-special">)</span><span>
</span><a name="line-472"></a></pre></body></html>