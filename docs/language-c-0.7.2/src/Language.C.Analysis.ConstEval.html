<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE RelaxedPolyRec #-}</span><span>
</span><a name="line-2"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Language.C.Analysis.ConstEval</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-3"></a><span>
</span><a name="line-4"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad</span><span>
</span><a name="line-5"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Bits</span><span>
</span><a name="line-6"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Maybe</span><span>
</span><a name="line-7"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.Map</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Map</span><span>
</span><a name="line-8"></a><span class="hs-keyword">import</span><span> </span><a href="Language.C.Syntax.AST.html"><span class="hs-identifier">Language.C.Syntax.AST</span></a><span>
</span><a name="line-9"></a><span class="hs-keyword">import</span><span> </span><a href="Language.C.Syntax.Constants.html"><span class="hs-identifier">Language.C.Syntax.Constants</span></a><span>
</span><a name="line-10"></a><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><a href="Language.C.Analysis.AstAnalysis.html"><span class="hs-identifier">Language.C.Analysis.AstAnalysis</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.AstAnalysis.html#tExpr"><span class="hs-identifier hs-var">tExpr</span></a><span class="hs-special">,</span><span> </span><a href="Language.C.Analysis.AstAnalysis.html#ExprSide"><span class="hs-identifier hs-type">ExprSide</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-11"></a><span class="hs-keyword">import</span><span> </span><a href="Language.C.Analysis.Debug.html"><span class="hs-identifier">Language.C.Analysis.Debug</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-12"></a><span class="hs-keyword">import</span><span> </span><a href="Language.C.Analysis.DeclAnalysis.html"><span class="hs-identifier">Language.C.Analysis.DeclAnalysis</span></a><span>
</span><a name="line-13"></a><span class="hs-keyword">import</span><span> </span><a href="Language.C.Analysis.DefTable.html"><span class="hs-identifier">Language.C.Analysis.DefTable</span></a><span>
</span><a name="line-14"></a><span class="hs-keyword">import</span><span> </span><a href="Language.C.Data.html"><span class="hs-identifier">Language.C.Data</span></a><span>
</span><a name="line-15"></a><span class="hs-keyword">import</span><span> </span><a href="Language.C.Pretty.html"><span class="hs-identifier">Language.C.Pretty</span></a><span>
</span><a name="line-16"></a><span class="hs-keyword">import</span><span> </span><a href="Language.C.Analysis.SemRep.html"><span class="hs-identifier">Language.C.Analysis.SemRep</span></a><span>
</span><a name="line-17"></a><span class="hs-keyword">import</span><span> </span><a href="Language.C.Analysis.TravMonad.html"><span class="hs-identifier">Language.C.Analysis.TravMonad</span></a><span>
</span><a name="line-18"></a><span class="hs-keyword">import</span><span> </span><a href="Language.C.Analysis.TypeUtils.html"><span class="hs-identifier">Language.C.Analysis.TypeUtils</span></a><span>
</span><a name="line-19"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Text.PrettyPrint.HughesPJ</span><span>
</span><a name="line-20"></a><span>
</span><a name="line-21"></a><span class="hs-keyword">data</span><span> </span><a name="MachineDesc"><a href="Language.C.Analysis.ConstEval.html#MachineDesc"><span class="hs-identifier">MachineDesc</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-22"></a><span>  </span><a name="MachineDesc"><a href="Language.C.Analysis.ConstEval.html#MachineDesc"><span class="hs-identifier">MachineDesc</span></a></a><span>
</span><a name="line-23"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="iSize"><a href="Language.C.Analysis.ConstEval.html#iSize"><span class="hs-identifier">iSize</span></a></a><span>        </span><span class="hs-glyph">::</span><span> </span><a href="Language.C.Analysis.SemRep.html#IntType"><span class="hs-identifier hs-type">IntType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-24"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="fSize"><a href="Language.C.Analysis.ConstEval.html#fSize"><span class="hs-identifier">fSize</span></a></a><span>        </span><span class="hs-glyph">::</span><span> </span><a href="Language.C.Analysis.SemRep.html#FloatType"><span class="hs-identifier hs-type">FloatType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-25"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="builtinSize"><a href="Language.C.Analysis.ConstEval.html#builtinSize"><span class="hs-identifier">builtinSize</span></a></a><span>  </span><span class="hs-glyph">::</span><span> </span><a href="Language.C.Analysis.SemRep.html#BuiltinType"><span class="hs-identifier hs-type">BuiltinType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-26"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="ptrSize"><a href="Language.C.Analysis.ConstEval.html#ptrSize"><span class="hs-identifier">ptrSize</span></a></a><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-27"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="voidSize"><a href="Language.C.Analysis.ConstEval.html#voidSize"><span class="hs-identifier">voidSize</span></a></a><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-28"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="iAlign"><a href="Language.C.Analysis.ConstEval.html#iAlign"><span class="hs-identifier">iAlign</span></a></a><span>       </span><span class="hs-glyph">::</span><span> </span><a href="Language.C.Analysis.SemRep.html#IntType"><span class="hs-identifier hs-type">IntType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-29"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="fAlign"><a href="Language.C.Analysis.ConstEval.html#fAlign"><span class="hs-identifier">fAlign</span></a></a><span>       </span><span class="hs-glyph">::</span><span> </span><a href="Language.C.Analysis.SemRep.html#FloatType"><span class="hs-identifier hs-type">FloatType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-30"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="builtinAlign"><a href="Language.C.Analysis.ConstEval.html#builtinAlign"><span class="hs-identifier">builtinAlign</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.C.Analysis.SemRep.html#BuiltinType"><span class="hs-identifier hs-type">BuiltinType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-31"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="ptrAlign"><a href="Language.C.Analysis.ConstEval.html#ptrAlign"><span class="hs-identifier">ptrAlign</span></a></a><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-32"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="voidAlign"><a href="Language.C.Analysis.ConstEval.html#voidAlign"><span class="hs-identifier">voidAlign</span></a></a><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-33"></a><span>  </span><span class="hs-special">}</span><span>
</span><a name="line-34"></a><span>
</span><a name="line-35"></a><span class="hs-identifier">intExpr</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Language.C.Data.Position.html#Pos"><span class="hs-identifier hs-type">Pos</span></a><span> </span><a href="#local-6989586621679172110"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">,</span><span> </span><a href="Language.C.Analysis.TravMonad.html#MonadName"><span class="hs-identifier hs-type">MonadName</span></a><span> </span><a href="#local-6989586621679172111"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679172110"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Integer</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679172111"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="Language.C.Syntax.AST.html#CExpr"><span class="hs-identifier hs-type">CExpr</span></a><span>
</span><a name="line-36"></a><a name="intExpr"><a href="Language.C.Analysis.ConstEval.html#intExpr"><span class="hs-identifier">intExpr</span></a></a><span> </span><a name="local-6989586621679172112"><a href="#local-6989586621679172112"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679172113"><a href="#local-6989586621679172113"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-37"></a><span>  </span><a href="Language.C.Analysis.TravMonad.html#genName"><span class="hs-identifier hs-var">genName</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679172114"><a href="#local-6989586621679172114"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-38"></a><span>    </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.C.Syntax.AST.html#CConst"><span class="hs-identifier hs-var">CConst</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.C.Syntax.AST.html#CIntConst"><span class="hs-identifier hs-var">CIntConst</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.Constants.html#cInteger"><span class="hs-identifier hs-var">cInteger</span></a><span> </span><a href="#local-6989586621679172113"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Language.C.Data.Node.html#mkNodeInfo"><span class="hs-identifier hs-var">mkNodeInfo</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Data.Position.html#posOf"><span class="hs-identifier hs-var">posOf</span></a><span> </span><a href="#local-6989586621679172112"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679172114"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>
</span><a name="line-39"></a><span>
</span><a name="line-40"></a><span class="hs-identifier">sizeofType</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.TravMonad.html#MonadTrav"><span class="hs-identifier hs-type">MonadTrav</span></a><span> </span><a href="#local-6989586621679172108"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><a href="Language.C.Data.Node.html#CNode"><span class="hs-identifier hs-type">CNode</span></a><span> </span><a href="#local-6989586621679172109"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Language.C.Analysis.ConstEval.html#MachineDesc"><span class="hs-identifier hs-type">MachineDesc</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679172109"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.C.Analysis.SemRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679172108"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-41"></a><a name="sizeofType"><a href="Language.C.Analysis.ConstEval.html#sizeofType"><span class="hs-identifier">sizeofType</span></a></a><span> </span><a name="local-6989586621679172115"><a href="#local-6989586621679172115"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#DirectType"><span class="hs-identifier hs-var">DirectType</span></a><span> </span><a href="Language.C.Analysis.SemRep.html#TyVoid"><span class="hs-identifier hs-var">TyVoid</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">voidSize</span><span> </span><a href="#local-6989586621679172115"><span class="hs-identifier hs-var">md</span></a><span>
</span><a name="line-42"></a><span class="hs-identifier">sizeofType</span><span> </span><a name="local-6989586621679172116"><a href="#local-6989586621679172116"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#DirectType"><span class="hs-identifier hs-var">DirectType</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TyIntegral"><span class="hs-identifier hs-var">TyIntegral</span></a><span> </span><a name="local-6989586621679172117"><a href="#local-6989586621679172117"><span class="hs-identifier">it</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">iSize</span><span> </span><a href="#local-6989586621679172116"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172117"><span class="hs-identifier hs-var">it</span></a><span>
</span><a name="line-43"></a><span class="hs-identifier">sizeofType</span><span> </span><a name="local-6989586621679172118"><a href="#local-6989586621679172118"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#DirectType"><span class="hs-identifier hs-var">DirectType</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TyFloating"><span class="hs-identifier hs-var">TyFloating</span></a><span> </span><a name="local-6989586621679172119"><a href="#local-6989586621679172119"><span class="hs-identifier">ft</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">fSize</span><span> </span><a href="#local-6989586621679172118"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172119"><span class="hs-identifier hs-var">ft</span></a><span>
</span><a name="line-44"></a><span class="hs-identifier">sizeofType</span><span> </span><a name="local-6989586621679172120"><a href="#local-6989586621679172120"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#DirectType"><span class="hs-identifier hs-var">DirectType</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TyComplex"><span class="hs-identifier hs-var">TyComplex</span></a><span> </span><a name="local-6989586621679172121"><a href="#local-6989586621679172121"><span class="hs-identifier">ft</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-number">2</span><span> </span><span class="hs-operator hs-var">*</span><span> </span><span class="hs-identifier">fSize</span><span> </span><a href="#local-6989586621679172120"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172121"><span class="hs-identifier hs-var">ft</span></a><span>
</span><a name="line-45"></a><span class="hs-identifier">sizeofType</span><span> </span><a name="local-6989586621679172122"><a href="#local-6989586621679172122"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#DirectType"><span class="hs-identifier hs-var">DirectType</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TyComp"><span class="hs-identifier hs-var">TyComp</span></a><span> </span><a name="local-6989586621679172123"><a href="#local-6989586621679172123"><span class="hs-identifier">ctr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.C.Analysis.ConstEval.html#compSize"><span class="hs-identifier hs-var">compSize</span></a><span> </span><a href="#local-6989586621679172122"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172123"><span class="hs-identifier hs-var">ctr</span></a><span>
</span><a name="line-46"></a><span class="hs-identifier">sizeofType</span><span> </span><a name="local-6989586621679172124"><a href="#local-6989586621679172124"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#DirectType"><span class="hs-identifier hs-var">DirectType</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TyEnum"><span class="hs-identifier hs-var">TyEnum</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">iSize</span><span> </span><a href="#local-6989586621679172124"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="Language.C.Analysis.SemRep.html#TyInt"><span class="hs-identifier hs-var">TyInt</span></a><span>
</span><a name="line-47"></a><span class="hs-identifier">sizeofType</span><span> </span><a name="local-6989586621679172125"><a href="#local-6989586621679172125"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#DirectType"><span class="hs-identifier hs-var">DirectType</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TyBuiltin"><span class="hs-identifier hs-var">TyBuiltin</span></a><span> </span><a name="local-6989586621679172126"><a href="#local-6989586621679172126"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">builtinSize</span><span> </span><a href="#local-6989586621679172125"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172126"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-48"></a><span class="hs-identifier">sizeofType</span><span> </span><a name="local-6989586621679172127"><a href="#local-6989586621679172127"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#PtrType"><span class="hs-identifier hs-var">PtrType</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">ptrSize</span><span> </span><a href="#local-6989586621679172127"><span class="hs-identifier hs-var">md</span></a><span>
</span><a name="line-49"></a><span class="hs-identifier">sizeofType</span><span> </span><a name="local-6989586621679172128"><a href="#local-6989586621679172128"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#ArrayType"><span class="hs-identifier hs-var">ArrayType</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#UnknownArraySize"><span class="hs-identifier hs-var">UnknownArraySize</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">ptrSize</span><span> </span><a href="#local-6989586621679172128"><span class="hs-identifier hs-var">md</span></a><span>
</span><a name="line-50"></a><span class="hs-identifier">sizeofType</span><span> </span><a name="local-6989586621679172129"><a href="#local-6989586621679172129"><span class="hs-identifier">md</span></a></a><span> </span><a name="local-6989586621679172130"><a href="#local-6989586621679172130"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#ArrayType"><span class="hs-identifier hs-var">ArrayType</span></a><span> </span><a name="local-6989586621679172131"><a href="#local-6989586621679172131"><span class="hs-identifier">bt</span></a></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#ArraySize"><span class="hs-identifier hs-var">ArraySize</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679172132"><a href="#local-6989586621679172132"><span class="hs-identifier">sz</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-51"></a><span>  </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172133"><a href="#local-6989586621679172133"><span class="hs-identifier">sz'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.ConstEval.html#constEval"><span class="hs-identifier hs-var">constEval</span></a><span> </span><a href="#local-6989586621679172129"><span class="hs-identifier hs-var">md</span></a><span> </span><span class="hs-identifier hs-var">Map.empty</span><span> </span><a href="#local-6989586621679172132"><span class="hs-identifier hs-var">sz</span></a><span>
</span><a name="line-52"></a><span>     </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679172133"><span class="hs-identifier hs-var">sz'</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-53"></a><span>       </span><a href="Language.C.Syntax.AST.html#CConst"><span class="hs-identifier hs-var">CConst</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CIntConst"><span class="hs-identifier hs-var">CIntConst</span></a><span> </span><a name="local-6989586621679172134"><a href="#local-6989586621679172134"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-54"></a><span>         </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172135"><a href="#local-6989586621679172135"><span class="hs-identifier">s</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.ConstEval.html#sizeofType"><span class="hs-identifier hs-var">sizeofType</span></a><span> </span><a href="#local-6989586621679172129"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172130"><span class="hs-identifier hs-var">n</span></a><span> </span><a href="#local-6989586621679172131"><span class="hs-identifier hs-var">bt</span></a><span>
</span><a name="line-55"></a><span>            </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.C.Syntax.Constants.html#getCInteger"><span class="hs-identifier hs-var">getCInteger</span></a><span> </span><a href="#local-6989586621679172134"><span class="hs-identifier hs-var">i</span></a><span> </span><span class="hs-operator hs-var">*</span><span> </span><a href="#local-6989586621679172135"><span class="hs-identifier hs-var">s</span></a><span>
</span><a name="line-56"></a><span>       </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">ptrSize</span><span> </span><a href="#local-6989586621679172129"><span class="hs-identifier hs-var">md</span></a><span>
</span><a name="line-57"></a><span>            </span><span class="hs-comment">{-
            astError (nodeInfo sz) $
            &quot;array size is not a constant: &quot; ++ (render . pretty) sz
            -}</span><span>
</span><a name="line-61"></a><span class="hs-identifier">sizeofType</span><span> </span><a name="local-6989586621679172136"><a href="#local-6989586621679172136"><span class="hs-identifier">md</span></a></a><span> </span><a name="local-6989586621679172137"><a href="#local-6989586621679172137"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TypeDefType"><span class="hs-identifier hs-var">TypeDefType</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TypeDefRef"><span class="hs-identifier hs-var">TypeDefRef</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679172138"><a href="#local-6989586621679172138"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.C.Analysis.ConstEval.html#sizeofType"><span class="hs-identifier hs-var">sizeofType</span></a><span> </span><a href="#local-6989586621679172136"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172137"><span class="hs-identifier hs-var">n</span></a><span> </span><a href="#local-6989586621679172138"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-62"></a><span class="hs-identifier">sizeofType</span><span> </span><a name="local-6989586621679172139"><a href="#local-6989586621679172139"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#FunctionType"><span class="hs-identifier hs-var">FunctionType</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">ptrSize</span><span> </span><a href="#local-6989586621679172139"><span class="hs-identifier hs-var">md</span></a><span>
</span><a name="line-63"></a><span>
</span><a name="line-64"></a><span class="hs-identifier">alignofType</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.TravMonad.html#MonadTrav"><span class="hs-identifier hs-type">MonadTrav</span></a><span> </span><a href="#local-6989586621679172106"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><a href="Language.C.Data.Node.html#CNode"><span class="hs-identifier hs-type">CNode</span></a><span> </span><a href="#local-6989586621679172107"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Language.C.Analysis.ConstEval.html#MachineDesc"><span class="hs-identifier hs-type">MachineDesc</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679172107"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.C.Analysis.SemRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679172106"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-65"></a><a name="alignofType"><a href="Language.C.Analysis.ConstEval.html#alignofType"><span class="hs-identifier">alignofType</span></a></a><span> </span><a name="local-6989586621679172140"><a href="#local-6989586621679172140"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#DirectType"><span class="hs-identifier hs-var">DirectType</span></a><span> </span><a href="Language.C.Analysis.SemRep.html#TyVoid"><span class="hs-identifier hs-var">TyVoid</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">voidAlign</span><span> </span><a href="#local-6989586621679172140"><span class="hs-identifier hs-var">md</span></a><span>
</span><a name="line-66"></a><span class="hs-identifier">alignofType</span><span> </span><a name="local-6989586621679172141"><a href="#local-6989586621679172141"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#DirectType"><span class="hs-identifier hs-var">DirectType</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TyIntegral"><span class="hs-identifier hs-var">TyIntegral</span></a><span> </span><a name="local-6989586621679172142"><a href="#local-6989586621679172142"><span class="hs-identifier">it</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">iAlign</span><span> </span><a href="#local-6989586621679172141"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172142"><span class="hs-identifier hs-var">it</span></a><span>
</span><a name="line-67"></a><span class="hs-identifier">alignofType</span><span> </span><a name="local-6989586621679172143"><a href="#local-6989586621679172143"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#DirectType"><span class="hs-identifier hs-var">DirectType</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TyFloating"><span class="hs-identifier hs-var">TyFloating</span></a><span> </span><a name="local-6989586621679172144"><a href="#local-6989586621679172144"><span class="hs-identifier">ft</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">fAlign</span><span> </span><a href="#local-6989586621679172143"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172144"><span class="hs-identifier hs-var">ft</span></a><span>
</span><a name="line-68"></a><span class="hs-identifier">alignofType</span><span> </span><a name="local-6989586621679172145"><a href="#local-6989586621679172145"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#DirectType"><span class="hs-identifier hs-var">DirectType</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TyComplex"><span class="hs-identifier hs-var">TyComplex</span></a><span> </span><a name="local-6989586621679172146"><a href="#local-6989586621679172146"><span class="hs-identifier">ft</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">fAlign</span><span> </span><a href="#local-6989586621679172145"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172146"><span class="hs-identifier hs-var">ft</span></a><span>
</span><a name="line-69"></a><span class="hs-identifier">alignofType</span><span> </span><a name="local-6989586621679172147"><a href="#local-6989586621679172147"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#DirectType"><span class="hs-identifier hs-var">DirectType</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TyEnum"><span class="hs-identifier hs-var">TyEnum</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">iAlign</span><span> </span><a href="#local-6989586621679172147"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="Language.C.Analysis.SemRep.html#TyInt"><span class="hs-identifier hs-var">TyInt</span></a><span>
</span><a name="line-70"></a><span class="hs-identifier">alignofType</span><span> </span><a name="local-6989586621679172148"><a href="#local-6989586621679172148"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#DirectType"><span class="hs-identifier hs-var">DirectType</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TyBuiltin"><span class="hs-identifier hs-var">TyBuiltin</span></a><span> </span><a name="local-6989586621679172149"><a href="#local-6989586621679172149"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">builtinAlign</span><span> </span><a href="#local-6989586621679172148"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172149"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-71"></a><span class="hs-identifier">alignofType</span><span> </span><a name="local-6989586621679172150"><a href="#local-6989586621679172150"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#PtrType"><span class="hs-identifier hs-var">PtrType</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">ptrAlign</span><span> </span><a href="#local-6989586621679172150"><span class="hs-identifier hs-var">md</span></a><span>
</span><a name="line-72"></a><span class="hs-identifier">alignofType</span><span> </span><a name="local-6989586621679172151"><a href="#local-6989586621679172151"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#ArrayType"><span class="hs-identifier hs-var">ArrayType</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#UnknownArraySize"><span class="hs-identifier hs-var">UnknownArraySize</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">ptrAlign</span><span> </span><a href="#local-6989586621679172151"><span class="hs-identifier hs-var">md</span></a><span>
</span><a name="line-73"></a><span class="hs-identifier">alignofType</span><span> </span><a name="local-6989586621679172152"><a href="#local-6989586621679172152"><span class="hs-identifier">md</span></a></a><span> </span><a name="local-6989586621679172153"><a href="#local-6989586621679172153"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#ArrayType"><span class="hs-identifier hs-var">ArrayType</span></a><span> </span><a name="local-6989586621679172154"><a href="#local-6989586621679172154"><span class="hs-identifier">bt</span></a></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#ArraySize"><span class="hs-identifier hs-var">ArraySize</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.C.Analysis.ConstEval.html#alignofType"><span class="hs-identifier hs-var">alignofType</span></a><span> </span><a href="#local-6989586621679172152"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172153"><span class="hs-identifier hs-var">n</span></a><span> </span><a href="#local-6989586621679172154"><span class="hs-identifier hs-var">bt</span></a><span>
</span><a name="line-74"></a><span class="hs-identifier">alignofType</span><span> </span><a name="local-6989586621679172155"><a href="#local-6989586621679172155"><span class="hs-identifier">md</span></a></a><span> </span><a name="local-6989586621679172156"><a href="#local-6989586621679172156"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TypeDefType"><span class="hs-identifier hs-var">TypeDefType</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TypeDefRef"><span class="hs-identifier hs-var">TypeDefRef</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679172157"><a href="#local-6989586621679172157"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.C.Analysis.ConstEval.html#alignofType"><span class="hs-identifier hs-var">alignofType</span></a><span> </span><a href="#local-6989586621679172155"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172156"><span class="hs-identifier hs-var">n</span></a><span> </span><a href="#local-6989586621679172157"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-75"></a><span class="hs-identifier">alignofType</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679172158"><a href="#local-6989586621679172158"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679172159"><a href="#local-6989586621679172159"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.C.Analysis.TravMonad.html#astError"><span class="hs-identifier hs-var">astError</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Data.Node.html#nodeInfo"><span class="hs-identifier hs-var">nodeInfo</span></a><span> </span><a href="#local-6989586621679172158"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-76"></a><span>                 </span><span class="hs-string">&quot;can't find alignment of type: &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">render</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Language.C.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679172159"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-77"></a><span>
</span><a name="line-78"></a><span class="hs-identifier">compSize</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.C.Analysis.TravMonad.html#MonadTrav"><span class="hs-identifier hs-type">MonadTrav</span></a><span> </span><a href="#local-6989586621679172105"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Language.C.Analysis.ConstEval.html#MachineDesc"><span class="hs-identifier hs-type">MachineDesc</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.C.Analysis.SemRep.html#CompTypeRef"><span class="hs-identifier hs-type">CompTypeRef</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679172105"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-79"></a><a name="compSize"><a href="Language.C.Analysis.ConstEval.html#compSize"><span class="hs-identifier">compSize</span></a></a><span> </span><a name="local-6989586621679172160"><a href="#local-6989586621679172160"><span class="hs-identifier">md</span></a></a><span> </span><a name="local-6989586621679172161"><a href="#local-6989586621679172161"><span class="hs-identifier">ctr</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-80"></a><span>  </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172162"><a href="#local-6989586621679172162"><span class="hs-identifier">dt</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.TravMonad.html#getDefTable"><span class="hs-identifier hs-var">getDefTable</span></a><span>
</span><a name="line-81"></a><span>     </span><span class="hs-keyword">case</span><span> </span><a href="Language.C.Analysis.DefTable.html#lookupTag"><span class="hs-identifier hs-var">lookupTag</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#sueRef"><span class="hs-identifier hs-var">sueRef</span></a><span> </span><a href="#local-6989586621679172161"><span class="hs-identifier hs-var">ctr</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679172162"><span class="hs-identifier hs-var">dt</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-82"></a><span>       </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.C.Analysis.TravMonad.html#astError"><span class="hs-identifier hs-var">astError</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Data.Node.html#nodeInfo"><span class="hs-identifier hs-var">nodeInfo</span></a><span> </span><a href="#local-6989586621679172161"><span class="hs-identifier hs-var">ctr</span></a><span class="hs-special">)</span><span>
</span><a name="line-83"></a><span>                          </span><span class="hs-string">&quot;composite declared but not defined&quot;</span><span>
</span><a name="line-84"></a><span>       </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#CompDef"><span class="hs-identifier hs-var">CompDef</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#CompType"><span class="hs-identifier hs-var">CompType</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679172163"><a href="#local-6989586621679172163"><span class="hs-identifier">tag</span></a></a><span> </span><a name="local-6989586621679172164"><a href="#local-6989586621679172164"><span class="hs-identifier">ms</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679172165"><a href="#local-6989586621679172165"><span class="hs-identifier">ni</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-85"></a><span>         </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679172166"><a href="#local-6989586621679172166"><span class="hs-identifier">ts</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><a href="Language.C.Analysis.SemRep.html#declType"><span class="hs-identifier hs-var">declType</span></a><span> </span><a href="#local-6989586621679172164"><span class="hs-identifier hs-var">ms</span></a><span>
</span><a name="line-86"></a><span>            </span><a name="local-6989586621679172167"><a href="#local-6989586621679172167"><span class="hs-identifier">sizes</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">mapM</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.ConstEval.html#sizeofType"><span class="hs-identifier hs-var">sizeofType</span></a><span> </span><a href="#local-6989586621679172160"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172165"><span class="hs-identifier hs-var">ni</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679172166"><span class="hs-identifier hs-var">ts</span></a><span>
</span><a name="line-87"></a><span>            </span><span class="hs-comment">-- XXX: handle padding</span><span>
</span><a name="line-88"></a><span>            </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679172163"><span class="hs-identifier hs-var">tag</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-89"></a><span>              </span><a href="Language.C.Analysis.SemRep.html#StructTag"><span class="hs-identifier hs-var">StructTag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">sum</span><span> </span><a href="#local-6989586621679172167"><span class="hs-identifier hs-var">sizes</span></a><span>
</span><a name="line-90"></a><span>              </span><a href="Language.C.Analysis.SemRep.html#UnionTag"><span class="hs-identifier hs-var">UnionTag</span></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">maximum</span><span> </span><a href="#local-6989586621679172167"><span class="hs-identifier hs-var">sizes</span></a><span>
</span><a name="line-91"></a><span>       </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#EnumDef"><span class="hs-identifier hs-var">EnumDef</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">iSize</span><span> </span><a href="#local-6989586621679172160"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="Language.C.Analysis.SemRep.html#TyInt"><span class="hs-identifier hs-var">TyInt</span></a><span>
</span><a name="line-92"></a><span>       </span><span class="hs-identifier hs-var">Nothing</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.C.Analysis.TravMonad.html#astError"><span class="hs-identifier hs-var">astError</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Data.Node.html#nodeInfo"><span class="hs-identifier hs-var">nodeInfo</span></a><span> </span><a href="#local-6989586621679172161"><span class="hs-identifier hs-var">ctr</span></a><span class="hs-special">)</span><span> </span><span class="hs-string">&quot;unknown composite&quot;</span><span>
</span><a name="line-93"></a><span>
</span><a name="line-94"></a><span>
</span><a name="line-95"></a><span class="hs-comment">{- Expression evaluation -}</span><span>
</span><a name="line-96"></a><span>
</span><a name="line-97"></a><span class="hs-comment">-- Use the withWordBytes function to wrap the results around to the</span><span>
</span><a name="line-98"></a><span class="hs-comment">-- correct word size</span><span>
</span><a name="line-99"></a><span class="hs-identifier">intOp</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.C.Syntax.Ops.html#CBinaryOp"><span class="hs-identifier hs-type">CBinaryOp</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Integer</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Integer</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-100"></a><a name="intOp"><a href="Language.C.Analysis.ConstEval.html#intOp"><span class="hs-identifier">intOp</span></a></a><span> </span><a href="Language.C.Syntax.Ops.html#CAddOp"><span class="hs-identifier hs-var">CAddOp</span></a><span> </span><a name="local-6989586621679172168"><a href="#local-6989586621679172168"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172169"><a href="#local-6989586621679172169"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679172168"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-operator hs-var">+</span><span> </span><a href="#local-6989586621679172169"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-101"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CSubOp"><span class="hs-identifier hs-var">CSubOp</span></a><span> </span><a name="local-6989586621679172170"><a href="#local-6989586621679172170"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172171"><a href="#local-6989586621679172171"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679172170"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-glyph">-</span><span> </span><a href="#local-6989586621679172171"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-102"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CMulOp"><span class="hs-identifier hs-var">CMulOp</span></a><span> </span><a name="local-6989586621679172172"><a href="#local-6989586621679172172"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172173"><a href="#local-6989586621679172173"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679172172"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-operator hs-var">*</span><span> </span><a href="#local-6989586621679172173"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-103"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CDivOp"><span class="hs-identifier hs-var">CDivOp</span></a><span> </span><a name="local-6989586621679172174"><a href="#local-6989586621679172174"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172175"><a href="#local-6989586621679172175"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679172174"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">div</span><span class="hs-special">`</span><span> </span><a href="#local-6989586621679172175"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-104"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CRmdOp"><span class="hs-identifier hs-var">CRmdOp</span></a><span> </span><a name="local-6989586621679172176"><a href="#local-6989586621679172176"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172177"><a href="#local-6989586621679172177"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679172176"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">mod</span><span class="hs-special">`</span><span> </span><a href="#local-6989586621679172177"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-105"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CShlOp"><span class="hs-identifier hs-var">CShlOp</span></a><span> </span><a name="local-6989586621679172178"><a href="#local-6989586621679172178"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172179"><a href="#local-6989586621679172179"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679172178"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">shiftL</span><span class="hs-special">`</span><span> </span><span class="hs-identifier hs-var">fromInteger</span><span> </span><a href="#local-6989586621679172179"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-106"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CShrOp"><span class="hs-identifier hs-var">CShrOp</span></a><span> </span><a name="local-6989586621679172180"><a href="#local-6989586621679172180"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172181"><a href="#local-6989586621679172181"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679172180"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">shiftR</span><span class="hs-special">`</span><span> </span><span class="hs-identifier hs-var">fromInteger</span><span> </span><a href="#local-6989586621679172181"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-107"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CLeOp"><span class="hs-identifier hs-var">CLeOp</span></a><span>  </span><a name="local-6989586621679172182"><a href="#local-6989586621679172182"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172183"><a href="#local-6989586621679172183"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">toInteger</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">fromEnum</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679172182"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-operator hs-var">&lt;</span><span> </span><a href="#local-6989586621679172183"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-108"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CGrOp"><span class="hs-identifier hs-var">CGrOp</span></a><span>  </span><a name="local-6989586621679172184"><a href="#local-6989586621679172184"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172185"><a href="#local-6989586621679172185"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">toInteger</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">fromEnum</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679172184"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-operator hs-var">&gt;</span><span> </span><a href="#local-6989586621679172185"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-109"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CLeqOp"><span class="hs-identifier hs-var">CLeqOp</span></a><span> </span><a name="local-6989586621679172186"><a href="#local-6989586621679172186"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172187"><a href="#local-6989586621679172187"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">toInteger</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">fromEnum</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679172186"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-operator hs-var">&lt;=</span><span> </span><a href="#local-6989586621679172187"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-110"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CGeqOp"><span class="hs-identifier hs-var">CGeqOp</span></a><span> </span><a name="local-6989586621679172188"><a href="#local-6989586621679172188"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172189"><a href="#local-6989586621679172189"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">toInteger</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">fromEnum</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679172188"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-operator hs-var">&gt;=</span><span> </span><a href="#local-6989586621679172189"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-111"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CEqOp"><span class="hs-identifier hs-var">CEqOp</span></a><span>  </span><a name="local-6989586621679172190"><a href="#local-6989586621679172190"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172191"><a href="#local-6989586621679172191"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">toInteger</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">fromEnum</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679172190"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><a href="#local-6989586621679172191"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-112"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CNeqOp"><span class="hs-identifier hs-var">CNeqOp</span></a><span> </span><a name="local-6989586621679172192"><a href="#local-6989586621679172192"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172193"><a href="#local-6989586621679172193"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">toInteger</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">fromEnum</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679172192"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-operator hs-var">/=</span><span> </span><a href="#local-6989586621679172193"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-113"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CAndOp"><span class="hs-identifier hs-var">CAndOp</span></a><span> </span><a name="local-6989586621679172194"><a href="#local-6989586621679172194"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172195"><a href="#local-6989586621679172195"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679172194"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-operator hs-var">.&amp;.</span><span> </span><a href="#local-6989586621679172195"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-114"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CXorOp"><span class="hs-identifier hs-var">CXorOp</span></a><span> </span><a name="local-6989586621679172196"><a href="#local-6989586621679172196"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172197"><a href="#local-6989586621679172197"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679172196"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">xor</span><span class="hs-special">`</span><span> </span><a href="#local-6989586621679172197"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-115"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#COrOp"><span class="hs-identifier hs-var">COrOp</span></a><span>  </span><a name="local-6989586621679172198"><a href="#local-6989586621679172198"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172199"><a href="#local-6989586621679172199"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679172198"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-operator hs-var">.|.</span><span> </span><a href="#local-6989586621679172199"><span class="hs-identifier hs-var">i2</span></a><span>
</span><a name="line-116"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CLndOp"><span class="hs-identifier hs-var">CLndOp</span></a><span> </span><a name="local-6989586621679172200"><a href="#local-6989586621679172200"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172201"><a href="#local-6989586621679172201"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">toInteger</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">fromEnum</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679172200"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-operator hs-var">/=</span><span> </span><span class="hs-number">0</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679172201"><span class="hs-identifier hs-var">i2</span></a><span> </span><span class="hs-operator hs-var">/=</span><span> </span><span class="hs-number">0</span><span class="hs-special">)</span><span>
</span><a name="line-117"></a><span class="hs-identifier">intOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CLorOp"><span class="hs-identifier hs-var">CLorOp</span></a><span> </span><a name="local-6989586621679172202"><a href="#local-6989586621679172202"><span class="hs-identifier">i1</span></a></a><span> </span><a name="local-6989586621679172203"><a href="#local-6989586621679172203"><span class="hs-identifier">i2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">toInteger</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">fromEnum</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679172202"><span class="hs-identifier hs-var">i1</span></a><span> </span><span class="hs-operator hs-var">/=</span><span> </span><span class="hs-number">0</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">||</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679172203"><span class="hs-identifier hs-var">i2</span></a><span> </span><span class="hs-operator hs-var">/=</span><span> </span><span class="hs-number">0</span><span class="hs-special">)</span><span>
</span><a name="line-118"></a><span>
</span><a name="line-119"></a><span class="hs-comment">-- Use the withWordBytes function to wrap the results around to the</span><span>
</span><a name="line-120"></a><span class="hs-comment">-- correct word size</span><span>
</span><a name="line-121"></a><span class="hs-identifier">intUnOp</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.C.Syntax.Ops.html#CUnaryOp"><span class="hs-identifier hs-type">CUnaryOp</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Integer</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-122"></a><a name="intUnOp"><a href="Language.C.Analysis.ConstEval.html#intUnOp"><span class="hs-identifier">intUnOp</span></a></a><span> </span><a href="Language.C.Syntax.Ops.html#CPlusOp"><span class="hs-identifier hs-var">CPlusOp</span></a><span> </span><a name="local-6989586621679172204"><a href="#local-6989586621679172204"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621679172204"><span class="hs-identifier hs-var">i</span></a><span>
</span><a name="line-123"></a><span class="hs-identifier">intUnOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CMinOp"><span class="hs-identifier hs-var">CMinOp</span></a><span>  </span><a name="local-6989586621679172205"><a href="#local-6989586621679172205"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">-</span><a href="#local-6989586621679172205"><span class="hs-identifier hs-var">i</span></a><span>
</span><a name="line-124"></a><span class="hs-identifier">intUnOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CCompOp"><span class="hs-identifier hs-var">CCompOp</span></a><span> </span><a name="local-6989586621679172206"><a href="#local-6989586621679172206"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">complement</span><span> </span><a href="#local-6989586621679172206"><span class="hs-identifier hs-var">i</span></a><span>
</span><a name="line-125"></a><span class="hs-identifier">intUnOp</span><span> </span><a href="Language.C.Syntax.Ops.html#CNegOp"><span class="hs-identifier hs-var">CNegOp</span></a><span>  </span><a name="local-6989586621679172207"><a href="#local-6989586621679172207"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">toInteger</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">fromEnum</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679172207"><span class="hs-identifier hs-var">i</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-126"></a><span class="hs-identifier">intUnOp</span><span> </span><span class="hs-identifier">_</span><span>       </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-127"></a><span>
</span><a name="line-128"></a><span class="hs-identifier">withWordBytes</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Integer</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-129"></a><a name="withWordBytes"><a href="Language.C.Analysis.ConstEval.html#withWordBytes"><span class="hs-identifier">withWordBytes</span></a></a><span> </span><a name="local-6989586621679172208"><a href="#local-6989586621679172208"><span class="hs-identifier">bytes</span></a></a><span> </span><a name="local-6989586621679172209"><a href="#local-6989586621679172209"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679172209"><span class="hs-identifier hs-var">n</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">rem</span><span class="hs-special">`</span><span> </span><span class="hs-special">(</span><span class="hs-number">1</span><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">shiftL</span><span class="hs-special">`</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679172208"><span class="hs-identifier hs-var">bytes</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">shiftL</span><span class="hs-special">`</span><span> </span><span class="hs-number">3</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-130"></a><span>
</span><a name="line-131"></a><span class="hs-identifier">boolValue</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.C.Syntax.AST.html#CExpr"><span class="hs-identifier hs-type">CExpr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-132"></a><a name="boolValue"><a href="Language.C.Analysis.ConstEval.html#boolValue"><span class="hs-identifier">boolValue</span></a></a><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CConst"><span class="hs-identifier hs-var">CConst</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CIntConst"><span class="hs-identifier hs-var">CIntConst</span></a><span> </span><a name="local-6989586621679172210"><a href="#local-6989586621679172210"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.C.Syntax.Constants.html#getCInteger"><span class="hs-identifier hs-var">getCInteger</span></a><span> </span><a href="#local-6989586621679172210"><span class="hs-identifier hs-var">i</span></a><span> </span><span class="hs-operator hs-var">/=</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-133"></a><span class="hs-identifier">boolValue</span><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CConst"><span class="hs-identifier hs-var">CConst</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CCharConst"><span class="hs-identifier hs-var">CCharConst</span></a><span> </span><a name="local-6989586621679172211"><a href="#local-6989586621679172211"><span class="hs-identifier">c</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.C.Syntax.Constants.html#getCCharAsInt"><span class="hs-identifier hs-var">getCCharAsInt</span></a><span> </span><a href="#local-6989586621679172211"><span class="hs-identifier hs-var">c</span></a><span> </span><span class="hs-operator hs-var">/=</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-134"></a><span class="hs-identifier">boolValue</span><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CConst"><span class="hs-identifier hs-var">CConst</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CStrConst"><span class="hs-identifier hs-var">CStrConst</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-135"></a><span class="hs-identifier">boolValue</span><span> </span><span class="hs-identifier">_</span><span>                         </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-136"></a><span>
</span><a name="line-137"></a><span class="hs-identifier">intValue</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.C.Syntax.AST.html#CExpr"><span class="hs-identifier hs-type">CExpr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">Integer</span><span>
</span><a name="line-138"></a><a name="intValue"><a href="Language.C.Analysis.ConstEval.html#intValue"><span class="hs-identifier">intValue</span></a></a><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CConst"><span class="hs-identifier hs-var">CConst</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CIntConst"><span class="hs-identifier hs-var">CIntConst</span></a><span> </span><a name="local-6989586621679172212"><a href="#local-6989586621679172212"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.C.Syntax.Constants.html#getCInteger"><span class="hs-identifier hs-var">getCInteger</span></a><span> </span><a href="#local-6989586621679172212"><span class="hs-identifier hs-var">i</span></a><span>
</span><a name="line-139"></a><span class="hs-identifier">intValue</span><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CConst"><span class="hs-identifier hs-var">CConst</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CCharConst"><span class="hs-identifier hs-var">CCharConst</span></a><span> </span><a name="local-6989586621679172213"><a href="#local-6989586621679172213"><span class="hs-identifier">c</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.C.Syntax.Constants.html#getCCharAsInt"><span class="hs-identifier hs-var">getCCharAsInt</span></a><span> </span><a href="#local-6989586621679172213"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-140"></a><span class="hs-identifier">intValue</span><span> </span><span class="hs-identifier">_</span><span>                         </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-141"></a><span>
</span><a name="line-142"></a><span class="hs-identifier">constEval</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.TravMonad.html#MonadTrav"><span class="hs-identifier hs-type">MonadTrav</span></a><span> </span><a href="#local-6989586621679172104"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><a name="line-143"></a><span>             </span><a href="Language.C.Analysis.ConstEval.html#MachineDesc"><span class="hs-identifier hs-type">MachineDesc</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Map.Map</span><span> </span><a href="Language.C.Data.Ident.html#Ident"><span class="hs-identifier hs-type">Ident</span></a><span> </span><a href="Language.C.Syntax.AST.html#CExpr"><span class="hs-identifier hs-type">CExpr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.C.Syntax.AST.html#CExpr"><span class="hs-identifier hs-type">CExpr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679172104"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="Language.C.Syntax.AST.html#CExpr"><span class="hs-identifier hs-type">CExpr</span></a><span>
</span><a name="line-144"></a><a name="constEval"><a href="Language.C.Analysis.ConstEval.html#constEval"><span class="hs-identifier">constEval</span></a></a><span> </span><a name="local-6989586621679172214"><a href="#local-6989586621679172214"><span class="hs-identifier">md</span></a></a><span> </span><a name="local-6989586621679172215"><a href="#local-6989586621679172215"><span class="hs-identifier">env</span></a></a><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CCond"><span class="hs-identifier hs-var">CCond</span></a><span> </span><a name="local-6989586621679172216"><a href="#local-6989586621679172216"><span class="hs-identifier">e1</span></a></a><span> </span><a name="local-6989586621679172217"><a href="#local-6989586621679172217"><span class="hs-identifier">me2</span></a></a><span> </span><a name="local-6989586621679172218"><a href="#local-6989586621679172218"><span class="hs-identifier">e3</span></a></a><span> </span><a name="local-6989586621679172219"><a href="#local-6989586621679172219"><span class="hs-identifier">ni</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-145"></a><span>  </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172220"><a href="#local-6989586621679172220"><span class="hs-identifier">e1'</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.ConstEval.html#constEval"><span class="hs-identifier hs-var">constEval</span></a><span> </span><a href="#local-6989586621679172214"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172215"><span class="hs-identifier hs-var">env</span></a><span> </span><a href="#local-6989586621679172216"><span class="hs-identifier hs-var">e1</span></a><span>
</span><a name="line-146"></a><span>     </span><a name="local-6989586621679172222"><a href="#local-6989586621679172222"><span class="hs-identifier">me2'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679172221"><a href="#local-6989586621679172221"><span class="hs-identifier">e</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">liftM</span><span class="hs-special">`</span><span> </span><a href="Language.C.Analysis.ConstEval.html#constEval"><span class="hs-identifier hs-var">constEval</span></a><span> </span><a href="#local-6989586621679172214"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172215"><span class="hs-identifier hs-var">env</span></a><span> </span><a href="#local-6989586621679172221"><span class="hs-identifier hs-var">e</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679172217"><span class="hs-identifier hs-var">me2</span></a><span>
</span><a name="line-147"></a><span>     </span><a name="local-6989586621679172223"><a href="#local-6989586621679172223"><span class="hs-identifier">e3'</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.ConstEval.html#constEval"><span class="hs-identifier hs-var">constEval</span></a><span> </span><a href="#local-6989586621679172214"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172215"><span class="hs-identifier hs-var">env</span></a><span> </span><a href="#local-6989586621679172218"><span class="hs-identifier hs-var">e3</span></a><span>
</span><a name="line-148"></a><span>     </span><span class="hs-keyword">case</span><span> </span><a href="Language.C.Analysis.ConstEval.html#boolValue"><span class="hs-identifier hs-var">boolValue</span></a><span> </span><a href="#local-6989586621679172220"><span class="hs-identifier hs-var">e1'</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-149"></a><span>       </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-identifier hs-var">True</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">fromMaybe</span><span> </span><a href="#local-6989586621679172220"><span class="hs-identifier hs-var">e1'</span></a><span> </span><a href="#local-6989586621679172222"><span class="hs-identifier hs-var">me2'</span></a><span>
</span><a name="line-150"></a><span>       </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679172223"><span class="hs-identifier hs-var">e3'</span></a><span>
</span><a name="line-151"></a><span>       </span><span class="hs-identifier hs-var">Nothing</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.C.Syntax.AST.html#CCond"><span class="hs-identifier hs-var">CCond</span></a><span> </span><a href="#local-6989586621679172220"><span class="hs-identifier hs-var">e1'</span></a><span> </span><a href="#local-6989586621679172222"><span class="hs-identifier hs-var">me2'</span></a><span> </span><a href="#local-6989586621679172223"><span class="hs-identifier hs-var">e3'</span></a><span> </span><a href="#local-6989586621679172219"><span class="hs-identifier hs-var">ni</span></a><span>
</span><a name="line-152"></a><span class="hs-identifier">constEval</span><span> </span><a name="local-6989586621679172224"><a href="#local-6989586621679172224"><span class="hs-identifier">md</span></a></a><span> </span><a name="local-6989586621679172225"><a href="#local-6989586621679172225"><span class="hs-identifier">env</span></a></a><span> </span><a name="local-6989586621679172226"><a href="#local-6989586621679172226"><span class="hs-identifier">e</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CBinary"><span class="hs-identifier hs-var">CBinary</span></a><span> </span><a name="local-6989586621679172227"><a href="#local-6989586621679172227"><span class="hs-identifier">op</span></a></a><span> </span><a name="local-6989586621679172228"><a href="#local-6989586621679172228"><span class="hs-identifier">e1</span></a></a><span> </span><a name="local-6989586621679172229"><a href="#local-6989586621679172229"><span class="hs-identifier">e2</span></a></a><span> </span><a name="local-6989586621679172230"><a href="#local-6989586621679172230"><span class="hs-identifier">ni</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-153"></a><span>  </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172231"><a href="#local-6989586621679172231"><span class="hs-identifier">e1'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.ConstEval.html#constEval"><span class="hs-identifier hs-var">constEval</span></a><span> </span><a href="#local-6989586621679172224"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172225"><span class="hs-identifier hs-var">env</span></a><span> </span><a href="#local-6989586621679172228"><span class="hs-identifier hs-var">e1</span></a><span>
</span><a name="line-154"></a><span>     </span><a name="local-6989586621679172232"><a href="#local-6989586621679172232"><span class="hs-identifier">e2'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.ConstEval.html#constEval"><span class="hs-identifier hs-var">constEval</span></a><span> </span><a href="#local-6989586621679172224"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172225"><span class="hs-identifier hs-var">env</span></a><span> </span><a href="#local-6989586621679172229"><span class="hs-identifier hs-var">e2</span></a><span>
</span><a name="line-155"></a><span>     </span><a name="local-6989586621679172233"><a href="#local-6989586621679172233"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.AstAnalysis.html#tExpr"><span class="hs-identifier hs-var">tExpr</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a href="Language.C.Analysis.AstAnalysis.html#RValue"><span class="hs-identifier hs-var">RValue</span></a><span> </span><a href="#local-6989586621679172226"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-156"></a><span>     </span><a name="local-6989586621679172234"><a href="#local-6989586621679172234"><span class="hs-identifier">bytes</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">fromIntegral</span><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">liftM</span><span class="hs-special">`</span><span> </span><a href="Language.C.Analysis.ConstEval.html#sizeofType"><span class="hs-identifier hs-var">sizeofType</span></a><span> </span><a href="#local-6989586621679172224"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172226"><span class="hs-identifier hs-var">e</span></a><span> </span><a href="#local-6989586621679172233"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-157"></a><span>     </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.ConstEval.html#intValue"><span class="hs-identifier hs-var">intValue</span></a><span> </span><a href="#local-6989586621679172231"><span class="hs-identifier hs-var">e1'</span></a><span class="hs-special">,</span><span> </span><a href="Language.C.Analysis.ConstEval.html#intValue"><span class="hs-identifier hs-var">intValue</span></a><span> </span><a href="#local-6989586621679172232"><span class="hs-identifier hs-var">e2'</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-158"></a><span>       </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679172235"><a href="#local-6989586621679172235"><span class="hs-identifier">i1</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679172236"><a href="#local-6989586621679172236"><span class="hs-identifier">i2</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.C.Analysis.ConstEval.html#intExpr"><span class="hs-identifier hs-var">intExpr</span></a><span> </span><a href="#local-6989586621679172230"><span class="hs-identifier hs-var">ni</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.ConstEval.html#withWordBytes"><span class="hs-identifier hs-var">withWordBytes</span></a><span> </span><a href="#local-6989586621679172234"><span class="hs-identifier hs-var">bytes</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.ConstEval.html#intOp"><span class="hs-identifier hs-var">intOp</span></a><span> </span><a href="#local-6989586621679172227"><span class="hs-identifier hs-var">op</span></a><span> </span><a href="#local-6989586621679172235"><span class="hs-identifier hs-var">i1</span></a><span> </span><a href="#local-6989586621679172236"><span class="hs-identifier hs-var">i2</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-159"></a><span>       </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.C.Syntax.AST.html#CBinary"><span class="hs-identifier hs-var">CBinary</span></a><span> </span><a href="#local-6989586621679172227"><span class="hs-identifier hs-var">op</span></a><span> </span><a href="#local-6989586621679172231"><span class="hs-identifier hs-var">e1'</span></a><span> </span><a href="#local-6989586621679172232"><span class="hs-identifier hs-var">e2'</span></a><span> </span><a href="#local-6989586621679172230"><span class="hs-identifier hs-var">ni</span></a><span>
</span><a name="line-160"></a><span class="hs-identifier">constEval</span><span> </span><a name="local-6989586621679172237"><a href="#local-6989586621679172237"><span class="hs-identifier">md</span></a></a><span> </span><a name="local-6989586621679172238"><a href="#local-6989586621679172238"><span class="hs-identifier">env</span></a></a><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CUnary"><span class="hs-identifier hs-var">CUnary</span></a><span> </span><a name="local-6989586621679172239"><a href="#local-6989586621679172239"><span class="hs-identifier">op</span></a></a><span> </span><a name="local-6989586621679172240"><a href="#local-6989586621679172240"><span class="hs-identifier">e</span></a></a><span> </span><a name="local-6989586621679172241"><a href="#local-6989586621679172241"><span class="hs-identifier">ni</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-161"></a><span>  </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172242"><a href="#local-6989586621679172242"><span class="hs-identifier">e'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.ConstEval.html#constEval"><span class="hs-identifier hs-var">constEval</span></a><span> </span><a href="#local-6989586621679172237"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172238"><span class="hs-identifier hs-var">env</span></a><span> </span><a href="#local-6989586621679172240"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-162"></a><span>     </span><a name="local-6989586621679172243"><a href="#local-6989586621679172243"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.AstAnalysis.html#tExpr"><span class="hs-identifier hs-var">tExpr</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a href="Language.C.Analysis.AstAnalysis.html#RValue"><span class="hs-identifier hs-var">RValue</span></a><span> </span><a href="#local-6989586621679172240"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-163"></a><span>     </span><a name="local-6989586621679172244"><a href="#local-6989586621679172244"><span class="hs-identifier">bytes</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">fromIntegral</span><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">liftM</span><span class="hs-special">`</span><span> </span><a href="Language.C.Analysis.ConstEval.html#sizeofType"><span class="hs-identifier hs-var">sizeofType</span></a><span> </span><a href="#local-6989586621679172237"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172240"><span class="hs-identifier hs-var">e</span></a><span> </span><a href="#local-6989586621679172243"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-164"></a><span>     </span><span class="hs-keyword">case</span><span> </span><a href="Language.C.Analysis.ConstEval.html#intValue"><span class="hs-identifier hs-var">intValue</span></a><span> </span><a href="#local-6989586621679172242"><span class="hs-identifier hs-var">e'</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-165"></a><span>       </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679172245"><a href="#local-6989586621679172245"><span class="hs-identifier">i</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="Language.C.Analysis.ConstEval.html#intUnOp"><span class="hs-identifier hs-var">intUnOp</span></a><span> </span><a href="#local-6989586621679172239"><span class="hs-identifier hs-var">op</span></a><span> </span><a href="#local-6989586621679172245"><span class="hs-identifier hs-var">i</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-166"></a><span>                    </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679172246"><a href="#local-6989586621679172246"><span class="hs-identifier">i'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.C.Analysis.ConstEval.html#intExpr"><span class="hs-identifier hs-var">intExpr</span></a><span> </span><a href="#local-6989586621679172241"><span class="hs-identifier hs-var">ni</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.ConstEval.html#withWordBytes"><span class="hs-identifier hs-var">withWordBytes</span></a><span> </span><a href="#local-6989586621679172244"><span class="hs-identifier hs-var">bytes</span></a><span> </span><a href="#local-6989586621679172246"><span class="hs-identifier hs-var">i'</span></a><span class="hs-special">)</span><span>
</span><a name="line-167"></a><span>                    </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.C.Analysis.TravMonad.html#astError"><span class="hs-identifier hs-var">astError</span></a><span> </span><a href="#local-6989586621679172241"><span class="hs-identifier hs-var">ni</span></a><span>
</span><a name="line-168"></a><span>                               </span><span class="hs-string">&quot;invalid unary operator applied to constant&quot;</span><span>
</span><a name="line-169"></a><span>       </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.C.Syntax.AST.html#CUnary"><span class="hs-identifier hs-var">CUnary</span></a><span> </span><a href="#local-6989586621679172239"><span class="hs-identifier hs-var">op</span></a><span> </span><a href="#local-6989586621679172242"><span class="hs-identifier hs-var">e'</span></a><span> </span><a href="#local-6989586621679172241"><span class="hs-identifier hs-var">ni</span></a><span>
</span><a name="line-170"></a><span class="hs-identifier">constEval</span><span> </span><a name="local-6989586621679172247"><a href="#local-6989586621679172247"><span class="hs-identifier">md</span></a></a><span> </span><a name="local-6989586621679172248"><a href="#local-6989586621679172248"><span class="hs-identifier">env</span></a></a><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CCast"><span class="hs-identifier hs-var">CCast</span></a><span> </span><a name="local-6989586621679172249"><a href="#local-6989586621679172249"><span class="hs-identifier">d</span></a></a><span> </span><a name="local-6989586621679172250"><a href="#local-6989586621679172250"><span class="hs-identifier">e</span></a></a><span> </span><a name="local-6989586621679172251"><a href="#local-6989586621679172251"><span class="hs-identifier">ni</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-171"></a><span>  </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172252"><a href="#local-6989586621679172252"><span class="hs-identifier">e'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.ConstEval.html#constEval"><span class="hs-identifier hs-var">constEval</span></a><span> </span><a href="#local-6989586621679172247"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172248"><span class="hs-identifier hs-var">env</span></a><span> </span><a href="#local-6989586621679172250"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-172"></a><span>     </span><a name="local-6989586621679172253"><a href="#local-6989586621679172253"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.DeclAnalysis.html#analyseTypeDecl"><span class="hs-identifier hs-var">analyseTypeDecl</span></a><span> </span><a href="#local-6989586621679172249"><span class="hs-identifier hs-var">d</span></a><span>
</span><a name="line-173"></a><span>     </span><a name="local-6989586621679172254"><a href="#local-6989586621679172254"><span class="hs-identifier">bytes</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">fromIntegral</span><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">liftM</span><span class="hs-special">`</span><span> </span><a href="Language.C.Analysis.ConstEval.html#sizeofType"><span class="hs-identifier hs-var">sizeofType</span></a><span> </span><a href="#local-6989586621679172247"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172249"><span class="hs-identifier hs-var">d</span></a><span> </span><a href="#local-6989586621679172253"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-174"></a><span>     </span><span class="hs-keyword">case</span><span> </span><a href="Language.C.Analysis.ConstEval.html#intValue"><span class="hs-identifier hs-var">intValue</span></a><span> </span><a href="#local-6989586621679172252"><span class="hs-identifier hs-var">e'</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-175"></a><span>       </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679172255"><a href="#local-6989586621679172255"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.C.Analysis.ConstEval.html#intExpr"><span class="hs-identifier hs-var">intExpr</span></a><span> </span><a href="#local-6989586621679172251"><span class="hs-identifier hs-var">ni</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.ConstEval.html#withWordBytes"><span class="hs-identifier hs-var">withWordBytes</span></a><span> </span><a href="#local-6989586621679172254"><span class="hs-identifier hs-var">bytes</span></a><span> </span><a href="#local-6989586621679172255"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">)</span><span>
</span><a name="line-176"></a><span>       </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.C.Syntax.AST.html#CCast"><span class="hs-identifier hs-var">CCast</span></a><span> </span><a href="#local-6989586621679172249"><span class="hs-identifier hs-var">d</span></a><span> </span><a href="#local-6989586621679172252"><span class="hs-identifier hs-var">e'</span></a><span> </span><a href="#local-6989586621679172251"><span class="hs-identifier hs-var">ni</span></a><span>
</span><a name="line-177"></a><span class="hs-identifier">constEval</span><span> </span><a name="local-6989586621679172256"><a href="#local-6989586621679172256"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CSizeofExpr"><span class="hs-identifier hs-var">CSizeofExpr</span></a><span> </span><a name="local-6989586621679172257"><a href="#local-6989586621679172257"><span class="hs-identifier">e</span></a></a><span> </span><a name="local-6989586621679172258"><a href="#local-6989586621679172258"><span class="hs-identifier">ni</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-178"></a><span>  </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172259"><a href="#local-6989586621679172259"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.AstAnalysis.html#tExpr"><span class="hs-identifier hs-var">tExpr</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a href="Language.C.Analysis.AstAnalysis.html#RValue"><span class="hs-identifier hs-var">RValue</span></a><span> </span><a href="#local-6989586621679172257"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-179"></a><span>     </span><a name="local-6989586621679172260"><a href="#local-6989586621679172260"><span class="hs-identifier">sz</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.ConstEval.html#sizeofType"><span class="hs-identifier hs-var">sizeofType</span></a><span> </span><a href="#local-6989586621679172256"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172257"><span class="hs-identifier hs-var">e</span></a><span> </span><a href="#local-6989586621679172259"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-180"></a><span>     </span><a href="Language.C.Analysis.ConstEval.html#intExpr"><span class="hs-identifier hs-var">intExpr</span></a><span> </span><a href="#local-6989586621679172258"><span class="hs-identifier hs-var">ni</span></a><span> </span><a href="#local-6989586621679172260"><span class="hs-identifier hs-var">sz</span></a><span>
</span><a name="line-181"></a><span class="hs-identifier">constEval</span><span> </span><a name="local-6989586621679172261"><a href="#local-6989586621679172261"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CSizeofType"><span class="hs-identifier hs-var">CSizeofType</span></a><span> </span><a name="local-6989586621679172262"><a href="#local-6989586621679172262"><span class="hs-identifier">d</span></a></a><span> </span><a name="local-6989586621679172263"><a href="#local-6989586621679172263"><span class="hs-identifier">ni</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-182"></a><span>  </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172264"><a href="#local-6989586621679172264"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.DeclAnalysis.html#analyseTypeDecl"><span class="hs-identifier hs-var">analyseTypeDecl</span></a><span> </span><a href="#local-6989586621679172262"><span class="hs-identifier hs-var">d</span></a><span>
</span><a name="line-183"></a><span>     </span><a name="local-6989586621679172265"><a href="#local-6989586621679172265"><span class="hs-identifier">sz</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.ConstEval.html#sizeofType"><span class="hs-identifier hs-var">sizeofType</span></a><span> </span><a href="#local-6989586621679172261"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172262"><span class="hs-identifier hs-var">d</span></a><span> </span><a href="#local-6989586621679172264"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-184"></a><span>     </span><a href="Language.C.Analysis.ConstEval.html#intExpr"><span class="hs-identifier hs-var">intExpr</span></a><span> </span><a href="#local-6989586621679172263"><span class="hs-identifier hs-var">ni</span></a><span> </span><a href="#local-6989586621679172265"><span class="hs-identifier hs-var">sz</span></a><span>
</span><a name="line-185"></a><span class="hs-identifier">constEval</span><span> </span><a name="local-6989586621679172266"><a href="#local-6989586621679172266"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CAlignofExpr"><span class="hs-identifier hs-var">CAlignofExpr</span></a><span> </span><a name="local-6989586621679172267"><a href="#local-6989586621679172267"><span class="hs-identifier">e</span></a></a><span> </span><a name="local-6989586621679172268"><a href="#local-6989586621679172268"><span class="hs-identifier">ni</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-186"></a><span>  </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172269"><a href="#local-6989586621679172269"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.AstAnalysis.html#tExpr"><span class="hs-identifier hs-var">tExpr</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a href="Language.C.Analysis.AstAnalysis.html#RValue"><span class="hs-identifier hs-var">RValue</span></a><span> </span><a href="#local-6989586621679172267"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-187"></a><span>     </span><a name="local-6989586621679172270"><a href="#local-6989586621679172270"><span class="hs-identifier">sz</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.ConstEval.html#alignofType"><span class="hs-identifier hs-var">alignofType</span></a><span> </span><a href="#local-6989586621679172266"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172267"><span class="hs-identifier hs-var">e</span></a><span> </span><a href="#local-6989586621679172269"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-188"></a><span>     </span><a href="Language.C.Analysis.ConstEval.html#intExpr"><span class="hs-identifier hs-var">intExpr</span></a><span> </span><a href="#local-6989586621679172268"><span class="hs-identifier hs-var">ni</span></a><span> </span><a href="#local-6989586621679172270"><span class="hs-identifier hs-var">sz</span></a><span>
</span><a name="line-189"></a><span class="hs-identifier">constEval</span><span> </span><a name="local-6989586621679172271"><a href="#local-6989586621679172271"><span class="hs-identifier">md</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CAlignofType"><span class="hs-identifier hs-var">CAlignofType</span></a><span> </span><a name="local-6989586621679172272"><a href="#local-6989586621679172272"><span class="hs-identifier">d</span></a></a><span> </span><a name="local-6989586621679172273"><a href="#local-6989586621679172273"><span class="hs-identifier">ni</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-190"></a><span>  </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172274"><a href="#local-6989586621679172274"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.DeclAnalysis.html#analyseTypeDecl"><span class="hs-identifier hs-var">analyseTypeDecl</span></a><span> </span><a href="#local-6989586621679172272"><span class="hs-identifier hs-var">d</span></a><span>
</span><a name="line-191"></a><span>     </span><a name="local-6989586621679172275"><a href="#local-6989586621679172275"><span class="hs-identifier">sz</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.ConstEval.html#alignofType"><span class="hs-identifier hs-var">alignofType</span></a><span> </span><a href="#local-6989586621679172271"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172272"><span class="hs-identifier hs-var">d</span></a><span> </span><a href="#local-6989586621679172274"><span class="hs-identifier hs-var">t</span></a><span>
</span><a name="line-192"></a><span>     </span><a href="Language.C.Analysis.ConstEval.html#intExpr"><span class="hs-identifier hs-var">intExpr</span></a><span> </span><a href="#local-6989586621679172273"><span class="hs-identifier hs-var">ni</span></a><span> </span><a href="#local-6989586621679172275"><span class="hs-identifier hs-var">sz</span></a><span>
</span><a name="line-193"></a><span class="hs-identifier">constEval</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679172276"><a href="#local-6989586621679172276"><span class="hs-identifier">env</span></a></a><span> </span><a name="local-6989586621679172277"><a href="#local-6989586621679172277"><span class="hs-identifier">e</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CVar"><span class="hs-identifier hs-var">CVar</span></a><span> </span><a name="local-6989586621679172278"><a href="#local-6989586621679172278"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">Map.member</span><span> </span><a href="#local-6989586621679172278"><span class="hs-identifier hs-var">i</span></a><span> </span><a href="#local-6989586621679172276"><span class="hs-identifier hs-var">env</span></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-194"></a><span>  </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">fromMaybe</span><span> </span><a href="#local-6989586621679172277"><span class="hs-identifier hs-var">e</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Map.lookup</span><span> </span><a href="#local-6989586621679172278"><span class="hs-identifier hs-var">i</span></a><span> </span><a href="#local-6989586621679172276"><span class="hs-identifier hs-var">env</span></a><span>
</span><a name="line-195"></a><span class="hs-identifier">constEval</span><span> </span><a name="local-6989586621679172279"><a href="#local-6989586621679172279"><span class="hs-identifier">md</span></a></a><span> </span><a name="local-6989586621679172280"><a href="#local-6989586621679172280"><span class="hs-identifier">env</span></a></a><span> </span><a name="local-6989586621679172281"><a href="#local-6989586621679172281"><span class="hs-identifier">e</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="Language.C.Syntax.AST.html#CVar"><span class="hs-identifier hs-var">CVar</span></a><span> </span><a name="local-6989586621679172282"><a href="#local-6989586621679172282"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-196"></a><span>  </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172288"><a href="#local-6989586621679172288"><span class="hs-identifier">t</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.AstAnalysis.html#tExpr"><span class="hs-identifier hs-var">tExpr</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a href="Language.C.Analysis.AstAnalysis.html#RValue"><span class="hs-identifier hs-var">RValue</span></a><span> </span><a href="#local-6989586621679172281"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-197"></a><span>     </span><span class="hs-keyword">case</span><span> </span><a href="Language.C.Analysis.TypeUtils.html#derefTypeDef"><span class="hs-identifier hs-var">derefTypeDef</span></a><span> </span><a href="#local-6989586621679172288"><span class="hs-identifier hs-var">t</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-198"></a><span>       </span><a href="Language.C.Analysis.SemRep.html#DirectType"><span class="hs-identifier hs-var">DirectType</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#TyEnum"><span class="hs-identifier hs-var">TyEnum</span></a><span> </span><a name="local-6989586621679172289"><a href="#local-6989586621679172289"><span class="hs-identifier">etr</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-199"></a><span>         </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172290"><a href="#local-6989586621679172290"><span class="hs-identifier">dt</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.TravMonad.html#getDefTable"><span class="hs-identifier hs-var">getDefTable</span></a><span>
</span><a name="line-200"></a><span>            </span><span class="hs-keyword">case</span><span> </span><a href="Language.C.Analysis.DefTable.html#lookupTag"><span class="hs-identifier hs-var">lookupTag</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#sueRef"><span class="hs-identifier hs-var">sueRef</span></a><span> </span><a href="#local-6989586621679172289"><span class="hs-identifier hs-var">etr</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679172290"><span class="hs-identifier hs-var">dt</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-201"></a><span>              </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#EnumDef"><span class="hs-identifier hs-var">EnumDef</span></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#EnumType"><span class="hs-identifier hs-var">EnumType</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679172291"><a href="#local-6989586621679172291"><span class="hs-identifier">es</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-202"></a><span>                </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172292"><a href="#local-6989586621679172292"><span class="hs-identifier">env'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">foldM</span><span> </span><a href="#local-6989586621679172283"><span class="hs-identifier hs-var">enumConst</span></a><span> </span><a href="#local-6989586621679172280"><span class="hs-identifier hs-var">env</span></a><span> </span><a href="#local-6989586621679172291"><span class="hs-identifier hs-var">es</span></a><span>
</span><a name="line-203"></a><span>                   </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">fromMaybe</span><span> </span><a href="#local-6989586621679172281"><span class="hs-identifier hs-var">e</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Map.lookup</span><span> </span><a href="#local-6989586621679172282"><span class="hs-identifier hs-var">i</span></a><span> </span><a href="#local-6989586621679172292"><span class="hs-identifier hs-var">env'</span></a><span>
</span><a name="line-204"></a><span>              </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679172281"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-205"></a><span>       </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679172281"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-206"></a><span>  </span><span class="hs-keyword">where</span><span> </span><a name="local-6989586621679172283"><a href="#local-6989586621679172283"><span class="hs-identifier">enumConst</span></a></a><span> </span><a name="local-6989586621679172284"><a href="#local-6989586621679172284"><span class="hs-identifier">env'</span></a></a><span> </span><span class="hs-special">(</span><a href="Language.C.Analysis.SemRep.html#Enumerator"><span class="hs-identifier hs-var">Enumerator</span></a><span> </span><a name="local-6989586621679172285"><a href="#local-6989586621679172285"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679172286"><a href="#local-6989586621679172286"><span class="hs-identifier">e'</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-207"></a><span>          </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679172287"><a href="#local-6989586621679172287"><span class="hs-identifier">c</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.C.Analysis.ConstEval.html#constEval"><span class="hs-identifier hs-var">constEval</span></a><span> </span><a href="#local-6989586621679172279"><span class="hs-identifier hs-var">md</span></a><span> </span><a href="#local-6989586621679172284"><span class="hs-identifier hs-var">env'</span></a><span> </span><a href="#local-6989586621679172286"><span class="hs-identifier hs-var">e'</span></a><span>
</span><a name="line-208"></a><span>             </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Map.insert</span><span> </span><a href="#local-6989586621679172285"><span class="hs-identifier hs-var">n</span></a><span> </span><a href="#local-6989586621679172287"><span class="hs-identifier hs-var">c</span></a><span> </span><a href="#local-6989586621679172284"><span class="hs-identifier hs-var">env'</span></a><span>
</span><a name="line-209"></a><span class="hs-identifier">constEval</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679172293"><a href="#local-6989586621679172293"><span class="hs-identifier">e</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679172293"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-210"></a></pre></body></html>